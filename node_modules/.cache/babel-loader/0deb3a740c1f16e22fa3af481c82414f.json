{"ast":null,"code":"import{USER_LOGIN,USER_LOGOUT,GET_STUDENT_PERSONAL_INFO,SET_STUDENT_AS_USER,GET_STUDENT_LIST,UPDATE_STUDENT_INFO,GET_HEADER_COUNT,UPDATE_HEADER_COUNT,CHANGE_PASSWORD_STATUS,REMOVE_STUDENT_DATA,UPDATE_USER_PERSONAL_INFO,UPDATE_PARENT_PERSONAL_INFO,UPDATE_FEED_GROUP_INFO,GROUP_LIST_DATA}from'../types';import{setLocalStorage,getLocalStorage,clearLocalStorage}from'../../../commonFunctions';var INITIAL_STATE={userData:getLocalStorage('userInfo')||{},parentData:getLocalStorage('parentInfo'),otherUserInfoData:getLocalStorage('otherUserInfo')};export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:INITIAL_STATE;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case USER_LOGIN:if(action.payload&&action.payload.data&&action.payload.data.result){var _userInfo=action.payload.data.result||{};if(_userInfo.roleId===1){state.userData=_userInfo;state.parentData=null;setLocalStorage('parentInfo',null);}//else if (\n//   userInfo.roleId === 2 &&\n//   userInfo.students &&\n//   userInfo.students.length === 1\n// ) {\n//   state.parentData = userInfo;\n//   setLocalStorage('parentInfo', userInfo);\n//   userInfo.students[0]['token'] = userInfo['token'];\n//   userInfo = userInfo.students[0];\n//   state.userData = userInfo;\n// }\nelse if(_userInfo.roleId===2){state.parentData=_userInfo;setLocalStorage('parentInfo',_userInfo);//  userInfo.students[0]['token'] = userInfo['token'];\nstate.userData=_userInfo;}else{state.userData=_userInfo;}setLocalStorage('userInfo',_userInfo);}return Object.assign({},state);case GET_STUDENT_PERSONAL_INFO:if(action.payload&&action.payload.data&&action.payload.data.result){var object=action.payload.data.result;var _userInfo2=getLocalStorage('userInfo');for(var key in object){if(object.hasOwnProperty(key)){var element=object[key];_userInfo2[key]=element;state[key]=element;}}state.userData=_userInfo2;setLocalStorage('userInfo',_userInfo2);}return Object.assign({},state);case USER_LOGOUT:state.userData={};state.parentData=null;state.headerCount=null;clearLocalStorage();return Object.assign({},state);case SET_STUDENT_AS_USER:if(action.payload&&action.payload.otherUserInfoData){var otherUserInfoData=action.payload.otherUserInfoData;state.otherUserInfoData=otherUserInfoData;setLocalStorage('otherUserInfo',otherUserInfoData);}return Object.assign({},state);case GET_STUDENT_LIST:if(action.payload){var userInfoStudent=action.payload.data.result;var _userInfo3=getLocalStorage('parentInfo')?getLocalStorage('parentInfo'):getLocalStorage('userInfo');_userInfo3.students=userInfoStudent;state.userData=_userInfo3;state.parentData=_userInfo3;setLocalStorage('parentInfo',_userInfo3);setLocalStorage('userInfo',_userInfo3);}return Object.assign({},state);case UPDATE_STUDENT_INFO:if(action.payload&&action.payload.data.userId){var _userInfo4=state.userData;state.userData.students[action.payload.data.index].isActive=action.payload.data.isActive;setLocalStorage(state.userData.students[action.payloaddata.data.index].isActive,true);}return Object.assign({},state);case GET_HEADER_COUNT:if(action.payload&&action.payload.data&&action.payload.data.result[0]){var headerCountMessage=action.payload.data.result[0];state.headerCount=headerCountMessage;}return Object.assign({},state);case UPDATE_HEADER_COUNT:if(action){var headerCount=action.payload;headerCount['connectionCount']=headerCount.connectionCount==='0'?0:headerCount.connectionCount;headerCount['messagingCount']=headerCount.messagingCount==='0'?0:headerCount.messagingCount;headerCount['notificationCount']=headerCount.notificationCount==='0'?0:headerCount.notificationCount;state.headerCount=headerCount;}return Object.assign({},state);case CHANGE_PASSWORD_STATUS:var userInfo=getLocalStorage('parentInfo')?getLocalStorage('parentInfo'):getLocalStorage('userInfo');console.log(userInfo['isPasswordChanged']);userInfo['isPasswordChanged']=true;state.userData=userInfo;if(getLocalStorage('parentInfo')){state.parentData=userInfo;setLocalStorage('parentInfo',userInfo);}setLocalStorage('userInfo',userInfo);return Object.assign({},state);case REMOVE_STUDENT_DATA:if(action.payload&&action.payload.userId){var _userInfo5=getLocalStorage('parentInfo');if(getLocalStorage('parentInfo')){_userInfo5['students'].splice(_userInfo5['students'].findIndex(function(todo){return todo.userId===parseInt(action.payload.userId,10);}),1);state.parentData=_userInfo5;state.userData=_userInfo5;setLocalStorage('parentInfo',_userInfo5);setLocalStorage('userInfo',_userInfo5);}}return Object.assign({},state);case UPDATE_USER_PERSONAL_INFO:if(action.payload){var _object=action.payload;var _userInfo6=getLocalStorage('userInfo');for(var _key in _object){if(_object.hasOwnProperty(_key)){var _element=_object[_key];_userInfo6[_key]=_element;state[_key]=_element;}}state.userData=_userInfo6;setLocalStorage('userInfo',_userInfo6);}return Object.assign({},state);case UPDATE_PARENT_PERSONAL_INFO:if(action.payload){var _object2=action.payload;console.log(_object2);var parentInfo=getLocalStorage('parentInfo');for(var _key2 in _object2){if(_object2.hasOwnProperty(_key2)){var _element2=_object2[_key2];parentInfo[_key2]=_element2;state[_key2]=_element2;}}state.parentData=parentInfo;setLocalStorage('parentInfo',parentInfo);}return Object.assign({},state);case UPDATE_FEED_GROUP_INFO:if(action.payload){console.log(action.payload);state.groupInfoData=action.payload;if(state.groupListData){var groupListData=state.groupListData;var index=state.groupListData.findIndex(function(todo){return todo.groupId==action.payload.groupId;});if(index!==-1){groupListData[index]=action.payload;state.groupListData=groupListData;}}}return Object.assign({},state);case GROUP_LIST_DATA:if(action.payload&&action.payload.data.result){state.groupListData=action.payload.data.result;}return Object.assign({},state);default:return state;}});","map":{"version":3,"sources":["C:\\Users\\Ankur\\Desktop\\therapidhire\\therapidhireui\\TheRapidHireUI\\src\\common\\core\\redux\\reducers\\reducerUser.js"],"names":["USER_LOGIN","USER_LOGOUT","GET_STUDENT_PERSONAL_INFO","SET_STUDENT_AS_USER","GET_STUDENT_LIST","UPDATE_STUDENT_INFO","GET_HEADER_COUNT","UPDATE_HEADER_COUNT","CHANGE_PASSWORD_STATUS","REMOVE_STUDENT_DATA","UPDATE_USER_PERSONAL_INFO","UPDATE_PARENT_PERSONAL_INFO","UPDATE_FEED_GROUP_INFO","GROUP_LIST_DATA","setLocalStorage","getLocalStorage","clearLocalStorage","INITIAL_STATE","userData","parentData","otherUserInfoData","state","action","type","payload","data","result","userInfo","roleId","Object","assign","object","key","hasOwnProperty","element","headerCount","userInfoStudent","students","userId","index","isActive","payloaddata","headerCountMessage","connectionCount","messagingCount","notificationCount","console","log","splice","findIndex","todo","parseInt","parentInfo","groupInfoData","groupListData","groupId"],"mappings":"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oND,CArND","sourcesContent":["import {\r\n  USER_LOGIN,\r\n  USER_LOGOUT,\r\n  GET_STUDENT_PERSONAL_INFO,\r\n  SET_STUDENT_AS_USER,\r\n  GET_STUDENT_LIST,\r\n  UPDATE_STUDENT_INFO,\r\n  GET_HEADER_COUNT,\r\n  UPDATE_HEADER_COUNT,\r\n  CHANGE_PASSWORD_STATUS,\r\n  REMOVE_STUDENT_DATA,\r\n  UPDATE_USER_PERSONAL_INFO,\r\n  UPDATE_PARENT_PERSONAL_INFO,\r\n  UPDATE_FEED_GROUP_INFO,\r\n  GROUP_LIST_DATA\r\n} from '../types';\r\nimport {\r\n  setLocalStorage,\r\n  getLocalStorage,\r\n  clearLocalStorage\r\n} from '../../../commonFunctions';\r\n\r\nconst INITIAL_STATE = {\r\n  userData: getLocalStorage('userInfo') || {},  \r\n  parentData: getLocalStorage('parentInfo'),\r\n  otherUserInfoData: getLocalStorage('otherUserInfo')\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case USER_LOGIN:\r\n      if (action.payload && action.payload.data && action.payload.data.result) {\r\n        let userInfo = action.payload.data.result || {};\r\n        if (userInfo.roleId === 1) {\r\n          state.userData = userInfo;\r\n          state.parentData = null;\r\n          setLocalStorage('parentInfo', null);\r\n        }\r\n        //else if (\r\n        //   userInfo.roleId === 2 &&\r\n        //   userInfo.students &&\r\n        //   userInfo.students.length === 1\r\n        // ) {\r\n        //   state.parentData = userInfo;\r\n        //   setLocalStorage('parentInfo', userInfo);\r\n        //   userInfo.students[0]['token'] = userInfo['token'];\r\n        //   userInfo = userInfo.students[0];\r\n        //   state.userData = userInfo;\r\n        // }\r\n        else if (userInfo.roleId === 2) {\r\n          state.parentData = userInfo;\r\n          setLocalStorage('parentInfo', userInfo);\r\n          //  userInfo.students[0]['token'] = userInfo['token'];\r\n          state.userData = userInfo;\r\n        } else {\r\n          state.userData = userInfo;\r\n        }\r\n        setLocalStorage('userInfo', userInfo);\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case GET_STUDENT_PERSONAL_INFO:\r\n      if (action.payload && action.payload.data && action.payload.data.result) {\r\n        const object = action.payload.data.result;\r\n        let userInfo = getLocalStorage('userInfo');\r\n\r\n        for (const key in object) {\r\n          if (object.hasOwnProperty(key)) {\r\n            const element = object[key];\r\n            userInfo[key] = element;\r\n            state[key] = element;\r\n          }\r\n        }\r\n        state.userData = userInfo;\r\n        setLocalStorage('userInfo', userInfo);\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case USER_LOGOUT:\r\n      state.userData = {};\r\n      state.parentData = null;\r\n      state.headerCount = null;\r\n      clearLocalStorage();\r\n      return Object.assign({}, state);\r\n\r\n    case SET_STUDENT_AS_USER:\r\n      if (\r\n        action.payload &&        \r\n        action.payload.otherUserInfoData\r\n      ) {      \r\n        let otherUserInfoData = action.payload.otherUserInfoData;        \r\n        state.otherUserInfoData = otherUserInfoData;\r\n        setLocalStorage('otherUserInfo', otherUserInfoData);       \r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case GET_STUDENT_LIST:\r\n      if (action.payload) {\r\n        const userInfoStudent = action.payload.data.result;\r\n        let userInfo = getLocalStorage('parentInfo')\r\n          ? getLocalStorage('parentInfo')\r\n          : getLocalStorage('userInfo');\r\n        userInfo.students = userInfoStudent;\r\n        state.userData = userInfo;\r\n        state.parentData = userInfo;\r\n        setLocalStorage('parentInfo', userInfo);\r\n        setLocalStorage('userInfo', userInfo);\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case UPDATE_STUDENT_INFO:\r\n      if (action.payload && action.payload.data.userId) {\r\n        let userInfo = state.userData;\r\n        state.userData.students[action.payload.data.index].isActive =\r\n          action.payload.data.isActive;\r\n        setLocalStorage(\r\n          state.userData.students[action.payloaddata.data.index].isActive,\r\n          true\r\n        );\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case GET_HEADER_COUNT:\r\n      if (\r\n        action.payload &&\r\n        action.payload.data &&\r\n        action.payload.data.result[0]\r\n      ) {\r\n        const headerCountMessage = action.payload.data.result[0];\r\n        state.headerCount = headerCountMessage;\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case UPDATE_HEADER_COUNT:\r\n      if (action) {\r\n        let headerCount = action.payload;\r\n        headerCount['connectionCount'] =\r\n          headerCount.connectionCount === '0' ? 0 : headerCount.connectionCount;\r\n        headerCount['messagingCount'] =\r\n          headerCount.messagingCount === '0' ? 0 : headerCount.messagingCount;\r\n        headerCount['notificationCount'] =\r\n          headerCount.notificationCount === '0'\r\n            ? 0\r\n            : headerCount.notificationCount;\r\n        state.headerCount = headerCount;\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case CHANGE_PASSWORD_STATUS:\r\n      let userInfo = getLocalStorage('parentInfo')\r\n        ? getLocalStorage('parentInfo')\r\n        : getLocalStorage('userInfo');\r\n      console.log(userInfo['isPasswordChanged']);\r\n      userInfo['isPasswordChanged'] = true;\r\n      state.userData = userInfo;\r\n      if (getLocalStorage('parentInfo')) {\r\n        state.parentData = userInfo;\r\n        setLocalStorage('parentInfo', userInfo);\r\n      }\r\n      setLocalStorage('userInfo', userInfo);\r\n      return Object.assign({}, state);\r\n\r\n    case REMOVE_STUDENT_DATA:\r\n      if (action.payload && action.payload.userId) {\r\n        let userInfo = getLocalStorage('parentInfo');\r\n        if (getLocalStorage('parentInfo')) {\r\n          userInfo['students'].splice(\r\n            userInfo['students'].findIndex(\r\n              todo => todo.userId === parseInt(action.payload.userId, 10)\r\n            ),\r\n            1\r\n          );\r\n          state.parentData = userInfo;\r\n          state.userData = userInfo;\r\n          setLocalStorage('parentInfo', userInfo);\r\n          setLocalStorage('userInfo', userInfo);\r\n        }\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case UPDATE_USER_PERSONAL_INFO:\r\n      if (action.payload) {\r\n        const object = action.payload;\r\n        let userInfo = getLocalStorage('userInfo');\r\n\r\n        for (const key in object) {\r\n          if (object.hasOwnProperty(key)) {\r\n            const element = object[key];\r\n            userInfo[key] = element;\r\n            state[key] = element;\r\n          }\r\n        }\r\n        state.userData = userInfo;\r\n        setLocalStorage('userInfo', userInfo);\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case UPDATE_PARENT_PERSONAL_INFO:\r\n      if (action.payload) {\r\n        const object = action.payload;\r\n        console.log(object);\r\n        let parentInfo = getLocalStorage('parentInfo');\r\n\r\n        for (const key in object) {\r\n          if (object.hasOwnProperty(key)) {\r\n            const element = object[key];\r\n            parentInfo[key] = element;\r\n            state[key] = element;\r\n          }\r\n        }\r\n        state.parentData = parentInfo;\r\n        setLocalStorage('parentInfo', parentInfo);\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case UPDATE_FEED_GROUP_INFO:\r\n      if (action.payload) {\r\n        console.log(action.payload);\r\n        state.groupInfoData = action.payload;\r\n        if (state.groupListData) {\r\n          let groupListData = state.groupListData;\r\n          let index = state.groupListData.findIndex(\r\n            todo => todo.groupId == action.payload.groupId\r\n          );\r\n          if (index !== -1) {\r\n            groupListData[index] = action.payload;\r\n            state.groupListData = groupListData;\r\n          }\r\n        }\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    case GROUP_LIST_DATA:\r\n      if (action.payload && action.payload.data.result) {\r\n        state.groupListData = action.payload.data.result;\r\n      }\r\n      return Object.assign({}, state);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}