{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import PropTypes from'proptypes';import{connect}from'react-redux';import classnames from'classnames';import _ from'lodash';import{Player}from'video-react';//import 'video-react/dist/video-react.css'; // import css\nvar CallWindow=/*#__PURE__*/function(_Component){_inherits(CallWindow,_Component);function CallWindow(props,context){var _this$state;var _this;_classCallCheck(this,CallWindow);_this=_possibleConstructorReturn(this,_getPrototypeOf(CallWindow).call(this,props,context));_this.onDragStart=function(event,taskName){console.log('dragstart on div: ',taskName);event.dataTransfer.setData('taskName',taskName);};_this.onDragOver=function(event){event.preventDefault();};_this.onDrop=function(event,cat){var taskName=event.dataTransfer.getData('taskName');var saveSkiilTag=_this.props.saveSkiilTag;console.log('taskName -- ',taskName);console.log(_this.props);_this.props.saveSkillTag(taskName);var tasks=_this.state.tasks.filter(function(task){if(task.taskName==taskName){task.type=cat;}return task;});_this.setState(_objectSpread({},_this.state,{tasks:tasks}));};_this.state=(_this$state={Video:true,Audio:true},_defineProperty(_this$state,\"Audio\",{echoCancellation:true}),_defineProperty(_this$state,\"tasks\",[{id:'1',taskName:'Read book',type:'inProgress',backgroundColor:'red'},{id:'2',taskName:'Pay bills',type:'inProgress',backgroundColor:'green'},{id:'3',taskName:'Go to the gym',type:'Done',backgroundColor:'blue'},{id:'4',taskName:'Play baseball',type:'Done',backgroundColor:'green'}]),_defineProperty(_this$state,\"skillTag\",[]),_this$state);_this.btns=[{type:'Video',icon:'fa-video-camera'},{type:'Audio',icon:'fa-microphone'}];return _this;}_createClass(CallWindow,[{key:\"componentDidMount\",value:function componentDidMount(){this.setMediaStream();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){console.log('this.props -- ',this.props);var currentConfig=this.props.config;// Initialize when the call started\nif(!currentConfig&&nextProps.config){var config=nextProps.config,mediaDevice=nextProps.mediaDevice;_.forEach(config,function(conf,type){return mediaDevice.toggle(_.capitalize(type),conf);});this.setState({Video:config.video,Audio:config.audio});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.setMediaStream();}//   doSomethingBeforeUnload = () => {\n//     this.props.endCall(true);\n//     // Do something\n// }\n// // Setup the `beforeunload` event listener\n// setupBeforeUnloadListener = () => {\n//     window.addEventListener(\"beforeunload\", (ev) => {\n//         ev.preventDefault();\n//         return this.doSomethingBeforeUnload();\n//     });\n// };\n},{key:\"setMediaStream\",value:function setMediaStream(){var _this$props=this.props,peerSrc=_this$props.peerSrc,localSrc=_this$props.localSrc;if(this.peerVideo&&peerSrc)this.peerVideo.srcObject=peerSrc;if(this.localVideo&&localSrc)this.localVideo.srcObject=localSrc;}/**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */},{key:\"toggleMediaDevice\",value:function toggleMediaDevice(deviceType){var mediaDevice=this.props.mediaDevice;var deviceState=_.get(this.state,deviceType);this.setState(_defineProperty({},deviceType,!deviceState));mediaDevice.toggle(deviceType);}},{key:\"renderControlButtons\",value:function renderControlButtons(){var _this2=this;var getClass=function getClass(icon,type){return classnames(\"btn-action fa \".concat(icon),{disable:!_.get(_this2.state,type)});};return this.btns.map(function(btn){return React.createElement(\"button\",{key:\"btn\".concat(btn.type),type:\"button\",className:getClass(btn.icon,btn.type),onClick:function onClick(){return _this2.toggleMediaDevice(btn.type);}});});}},{key:\"render\",value:function render(){var _this3=this;var tasks={inProgress:[],Done:[]};var self=this;this.state.tasks.forEach(function(task){tasks[task.type].push(React.createElement(\"div\",{key:task.id,onDragStart:function onDragStart(event){return _this3.onDragStart(event,task.taskName);},draggable:true,className:\"draggable\",style:{backgroundColor:task.bgcolor}},task.taskName));});var _this$props2=this.props,status=_this$props2.status,endCall=_this$props2.endCall,startCallInterviewer=_this$props2.startCallInterviewer,saveSkiilTag=_this$props2.saveSkiilTag;return React.createElement(\"div\",null,React.createElement(\"div\",{className:classnames('call-window',status)},React.createElement(\"div\",{className:\"drag-container\"},React.createElement(\"h2\",{className:\"head\"},\"To Do List Drag & Drop\"),React.createElement(\"div\",{className:\"inProgress\",onDragOver:function onDragOver(event){return _this3.onDragOver(event);},onDrop:function onDrop(event){_this3.onDrop(event,'inProgress');}},React.createElement(\"span\",{className:\"group-header\"},\"In Progress\"),tasks.inProgress),React.createElement(\"div\",{className:\"droppable\",onDragOver:function onDragOver(event){return _this3.onDragOver(event);},onDrop:function onDrop(event){return _this3.onDrop(event,'Done');}},React.createElement(\"span\",{className:\"group-header\"},\"Done\"),tasks.Done)),React.createElement(\"video\",{id:\"peerVideo\",ref:function ref(el){return _this3.peerVideo=el;},autoPlay:true}),React.createElement(\"video\",{id:\"localVideo\",ref:function ref(el){return _this3.localVideo=el;},autoPlay:true,muted:true}),React.createElement(\"div\",{className:\"video-control\"},this.renderControlButtons(),this.props.user&&this.props.user.roleId==2?React.createElement(\"button\",{type:\"button\",className:\"btn-action hangup fa fa-phone\",onClick:function onClick(){return endCall(true);}}):null,this.props.user&&this.props.user.roleId==2?React.createElement(\"button\",{type:\"button\",className:\"btn-action startup fa fa-phone\",onClick:function onClick(){return startCallInterviewer(true);}}):null)));}}]);return CallWindow;}(Component);// export default CallWindow;\nvar mapStateToProps=function mapStateToProps(state){return{user:state.User.userData};};export default connect(mapStateToProps,null)(CallWindow);","map":{"version":3,"sources":["C:\\Users\\Ankur\\Desktop\\therapidhire\\therapidhireui\\TheRapidHireUI\\src\\videoChat\\js\\CallWindow.js"],"names":["React","Component","PropTypes","connect","classnames","_","Player","CallWindow","props","context","onDragStart","event","taskName","console","log","dataTransfer","setData","onDragOver","preventDefault","onDrop","cat","getData","saveSkiilTag","saveSkillTag","tasks","state","filter","task","type","setState","Video","Audio","echoCancellation","id","backgroundColor","btns","icon","setMediaStream","nextProps","currentConfig","config","mediaDevice","forEach","conf","toggle","capitalize","video","audio","peerSrc","localSrc","peerVideo","srcObject","localVideo","deviceType","deviceState","get","getClass","disable","map","btn","toggleMediaDevice","inProgress","Done","self","push","bgcolor","status","endCall","startCallInterviewer","el","renderControlButtons","user","roleId","mapStateToProps","User","userData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'proptypes';\r\nimport { connect } from 'react-redux';\r\nimport classnames from 'classnames';\r\nimport _ from 'lodash';\r\nimport { Player } from 'video-react';\r\n//import 'video-react/dist/video-react.css'; // import css\r\n\r\nclass CallWindow extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      Video: true,\r\n      Audio: true,\r\n      Audio: { echoCancellation: true },\r\n      tasks: [\r\n        {\r\n          id: '1',\r\n          taskName: 'Read book',\r\n          type: 'inProgress',\r\n          backgroundColor: 'red'\r\n        },\r\n        {\r\n          id: '2',\r\n          taskName: 'Pay bills',\r\n          type: 'inProgress',\r\n          backgroundColor: 'green'\r\n        },\r\n        {\r\n          id: '3',\r\n          taskName: 'Go to the gym',\r\n          type: 'Done',\r\n          backgroundColor: 'blue'\r\n        },\r\n        {\r\n          id: '4',\r\n          taskName: 'Play baseball',\r\n          type: 'Done',\r\n          backgroundColor: 'green'\r\n        }\r\n      ],\r\n      skillTag: []\r\n    };\r\n\r\n    this.btns = [\r\n      { type: 'Video', icon: 'fa-video-camera' },\r\n      { type: 'Audio', icon: 'fa-microphone' }\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setMediaStream();\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    console.log('this.props -- ', this.props);\r\n    const { config: currentConfig } = this.props;\r\n    // Initialize when the call started\r\n    if (!currentConfig && nextProps.config) {\r\n      const { config, mediaDevice } = nextProps;\r\n\r\n      _.forEach(config, (conf, type) =>\r\n        mediaDevice.toggle(_.capitalize(type), conf)\r\n      );\r\n\r\n      this.setState({\r\n        Video: config.video,\r\n        Audio: config.audio\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.setMediaStream();\r\n  }\r\n\r\n  //   doSomethingBeforeUnload = () => {\r\n  //     this.props.endCall(true);\r\n  //     // Do something\r\n  // }\r\n\r\n  // // Setup the `beforeunload` event listener\r\n  // setupBeforeUnloadListener = () => {\r\n  //     window.addEventListener(\"beforeunload\", (ev) => {\r\n\r\n  //         ev.preventDefault();\r\n\r\n  //         return this.doSomethingBeforeUnload();\r\n  //     });\r\n  // };\r\n\r\n  setMediaStream() {\r\n    const { peerSrc, localSrc } = this.props;\r\n    if (this.peerVideo && peerSrc) this.peerVideo.srcObject = peerSrc;\r\n    if (this.localVideo && localSrc) this.localVideo.srcObject = localSrc;\r\n  }\r\n\r\n  /**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */\r\n  toggleMediaDevice(deviceType) {\r\n    const { mediaDevice } = this.props;\r\n    const deviceState = _.get(this.state, deviceType);\r\n    this.setState({ [deviceType]: !deviceState });\r\n    mediaDevice.toggle(deviceType);\r\n  }\r\n\r\n  renderControlButtons() {\r\n    const getClass = (icon, type) =>\r\n      classnames(`btn-action fa ${icon}`, {\r\n        disable: !_.get(this.state, type)\r\n      });\r\n\r\n    return this.btns.map(btn => (\r\n      <button\r\n        key={`btn${btn.type}`}\r\n        type=\"button\"\r\n        className={getClass(btn.icon, btn.type)}\r\n        onClick={() => this.toggleMediaDevice(btn.type)}\r\n      />\r\n    ));\r\n  }\r\n\r\n  onDragStart = (event, taskName) => {\r\n    console.log('dragstart on div: ', taskName);\r\n    event.dataTransfer.setData('taskName', taskName);\r\n  };\r\n  onDragOver = event => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  onDrop = (event, cat) => {\r\n    let taskName = event.dataTransfer.getData('taskName');\r\n    const { saveSkiilTag } = this.props;\r\n    console.log('taskName -- ', taskName);\r\n    console.log(this.props);\r\n    this.props.saveSkillTag(taskName);\r\n\r\n    let tasks = this.state.tasks.filter(task => {\r\n      if (task.taskName == taskName) {\r\n        task.type = cat;\r\n      }\r\n      return task;\r\n    });\r\n\r\n    this.setState({\r\n      ...this.state,\r\n      tasks\r\n    });\r\n  };\r\n\r\n  render() {\r\n    var tasks = {\r\n      inProgress: [],\r\n      Done: []\r\n    };\r\n    let self = this;\r\n\r\n    this.state.tasks.forEach(task => {\r\n      tasks[task.type].push(\r\n        <div\r\n          key={task.id}\r\n          onDragStart={event => this.onDragStart(event, task.taskName)}\r\n          draggable\r\n          className=\"draggable\"\r\n          style={{ backgroundColor: task.bgcolor }}\r\n        >\r\n          {task.taskName}\r\n        </div>\r\n      );\r\n    });\r\n\r\n    const { status, endCall, startCallInterviewer, saveSkiilTag } = this.props;\r\n    return (\r\n      <div>\r\n        <div className={classnames('call-window', status)}>\r\n          <div className=\"drag-container\">\r\n            <h2 className=\"head\">To Do List Drag & Drop</h2>\r\n            <div\r\n              className=\"inProgress\"\r\n              onDragOver={event => this.onDragOver(event)}\r\n              onDrop={event => {\r\n                this.onDrop(event, 'inProgress');\r\n              }}\r\n            >\r\n              <span className=\"group-header\">In Progress</span>\r\n              {tasks.inProgress}\r\n            </div>\r\n            <div\r\n              className=\"droppable\"\r\n              onDragOver={event => this.onDragOver(event)}\r\n              onDrop={event => this.onDrop(event, 'Done')}\r\n            >\r\n              <span className=\"group-header\">Done</span>\r\n\r\n              {tasks.Done}\r\n            </div>\r\n          </div>\r\n          <video id=\"peerVideo\" ref={el => (this.peerVideo = el)} autoPlay />\r\n          {/* <Player\r\n          ref={player => {\r\n            this.player = player;\r\n          }}\r\n          autoPlay\r\n        >\r\n          <source src={this.state.peerSrc} /></Player>  */}\r\n\r\n          <video\r\n            id=\"localVideo\"\r\n            ref={el => (this.localVideo = el)}\r\n            autoPlay\r\n            muted\r\n          />\r\n\r\n          <div className=\"video-control\">\r\n            {this.renderControlButtons()}\r\n            {this.props.user && this.props.user.roleId == 2 ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-action hangup fa fa-phone\"\r\n                onClick={() => endCall(true)}\r\n              />\r\n            ) : null}\r\n            {this.props.user && this.props.user.roleId == 2 ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-action startup fa fa-phone\"\r\n                onClick={() => startCallInterviewer(true)}\r\n              ></button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCallWindow.propTypes = {\r\n  status: PropTypes.string.isRequired,\r\n  localSrc: PropTypes.object, // eslint-disable-line\r\n  peerSrc: PropTypes.object, // eslint-disable-line\r\n  config: PropTypes.object, // eslint-disable-line\r\n  mediaDevice: PropTypes.object, // eslint-disable-line\r\n  endCall: PropTypes.func.isRequired,\r\n  startCallInterviewer: PropTypes.func.isRequired,\r\n  saveSkiilTag: PropTypes.func.isRequired\r\n};\r\n\r\n// export default CallWindow;\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.User.userData\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(CallWindow);\r\n"]},"metadata":{},"sourceType":"module"}