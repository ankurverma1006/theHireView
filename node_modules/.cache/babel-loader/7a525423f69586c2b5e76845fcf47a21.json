{"ast":null,"code":"import _classCallCheck from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Header from'../header/header';import{Button,Media,Row,Col,FormControl,FormGroup,InputGroup}from'react-bootstrap';import{connect}from'react-redux';import{ToastContainer}from'react-toastify';import{Week,Month,Agenda,TimelineViews,TimelineMonth,ScheduleComponent,ViewsDirective,ViewDirective,ResourcesDirective,ResourceDirective,Inject}from'@syncfusion/ej2-react-schedule';import moment from'moment';import{extend}from'@syncfusion/ej2-base';import\"@syncfusion/ej2-base/styles/material.css\";import\"@syncfusion/ej2-buttons/styles/material.css\";import\"@syncfusion/ej2-calendars/styles/material.css\";import\"@syncfusion/ej2-dropdowns/styles/material.css\";import\"@syncfusion/ej2-inputs/styles/material.css\";import\"@syncfusion/ej2-lists/styles/material.css\";import\"@syncfusion/ej2-navigations/styles/material.css\";import\"@syncfusion/ej2-popups/styles/material.css\";//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\nimport\"@syncfusion/ej2-react-schedule/styles/material.css\";//import '../node_modules/@syncfusion/ej2/material.css';\n//import CompetencyRecommendations from '../profile/competency/recommendations/competencyWiseRecommendations';\nimport ImageCropper from'../../common/cropper/imageCropper';import DownloadLink from\"react-download-link\";//import Img from '../../common/cropper/img';\nimport{DatePickerComponent}from'@syncfusion/ej2-react-calendars';import{TimePickerComponent}from'@syncfusion/ej2-react-calendars';//import moment from 'moment';\nimport{showErrorToast,ZoomInAndOut}from'../../common/commonFunctions';import theRapidHireApiService from'../../common/core/api/apiService';import CONSTANTS from'../../common/core/config/appConfig';var TimeSlots=/*#__PURE__*/function(_Component){_inherits(TimeSlots,_Component);function TimeSlots(props){var _this;_classCallCheck(this,TimeSlots);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeSlots).apply(this,arguments));_this.handleChange=function(date){console.log(date);_this.setState({startDate:date});};_this.state={isOpen:false,startDate:new Date(),timeData:[]};return _this;}_createClass(TimeSlots,[{key:\"componentDidMount\",value:function componentDidMount(){var user=this.props.otherUser?this.props.otherUser:this.props.user;if(user){var userId=user.userId;this.setState({userId:userId,user:user});this.getUserProfileData(userId);this.getSlotDetails(userId);}}},{key:\"getUserProfileData\",value:function getUserProfileData(userId){var _this2=this;theRapidHireApiService('getUserSkillsById',{userId:userId}).then(function(response){if(response.data.status==='Success'){console.log(response.data);var userProfile=response.data.result[0];_this2.setState({userProfile:userProfile});}}).catch(function(err){console.log(err);});}},{key:\"getSlotDetails\",value:function getSlotDetails(userId){var _this3=this;var interviewerId=userId;theRapidHireApiService('getTimeSlotByInterviewer',{interviewerId:interviewerId}).then(function(response){if(response.data.status==='Success'){console.log(response);var timeData=[];response.data.result.forEach(function(item,index){var launchDate=new Date(item.startTimeStamp);var day=launchDate.getUTCDate();var month=launchDate.getMonth();var year=launchDate.getFullYear();var min=launchDate.getMinutes();var hour=launchDate.getHours();var startDate=new Date(year,month,day,hour,min);launchDate=new Date(item.endTimeStamp);day=launchDate.getUTCDate();month=launchDate.getMonth();year=launchDate.getFullYear();min=launchDate.getMinutes();hour=launchDate.getHours();var endDate=new Date(year,month,day,hour,min);timeData.push({slotId:item.slotId,text:'Photogenic',userId:item.userId,StartTime:startDate,EndTime:endDate,Color:item.userId?'#1aaa55':'#7fa900'});});_this3.setState({timeData:timeData});}}).catch(function(err){console.log(err);});}},{key:\"onPopupOpen\",value:function onPopupOpen(args){console.log(args);if(moment(args.data.StartTime).valueOf()<moment().valueOf()){args.cancel=true;showErrorToast('Selected time can not be less than current time.');return false;}console.log(args.data.StartTime);var self=this;var startDate=new Date(args.data.StartTime);var endDate=new Date(args.data.EndTime);console.log(moment(args.data.StartTime));var data={slotRegisteredDate:new Date(moment(args.data.StartTime).format(\"DD-MMM-YYYY\")).valueOf(),startTimeStamp:moment(startDate).valueOf(),endTimeStamp:moment(endDate).valueOf(),interviewerId:this.state.userId};if(!args.data.slotId){theRapidHireApiService('createSlot',data).then(function(response){if(response.data.status===\"Success\"){self.setState({isLoading:false});self.getSlotDetails(self.state.userId);}}).catch(function(error){// self.setState({ isLoading: false });\nconsole.log(error);});}else{var slotId=args.data.slotId;console.log(args.data);theRapidHireApiService('deleteTimeSlotByInterviewer',{slotId:slotId}).then(function(response){if(response.data.status===\"Success\"){self.setState({isLoading:false});self.getSlotDetails(self.state.userId);}}).catch(function(error){// self.setState({ isLoading: false });\nconsole.log(error);});}args.cancel=true;}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(ToastContainer,{autoClose:5000,className:\"custom-toaster-main-cls\",toastClassName:\"custom-toaster-bg\",transition:ZoomInAndOut}),React.createElement(Header,this.props),React.createElement(\"div\",{className:\"main-panel\"},React.createElement(\"div\",{className:\"w3-content main-panel1\"},this.state.userProfile?React.createElement(ScheduleComponent,{width:\"100%\",height:\"800px\",ref:function ref(schedule){return _this4.scheduleObj=schedule;},popupOpen:this.onPopupOpen.bind(this),showQuickInfo:false//  eventRendered={this.onEventRendered.bind(this)} selectedDate={new Date(2018, 3, 1)}\n,onChange:this.handleChange.bind(this),eventSettings:{dataSource:this.state.timeData}},React.createElement(ViewsDirective,null,React.createElement(ViewDirective,{option:\"Day\",startHour:\"09:30\",endHour:\"18:00\"}),React.createElement(ViewDirective,{option:\"Week\"}),React.createElement(ViewDirective,{option:\"Agenda\"})),React.createElement(ResourcesDirective,null,React.createElement(ResourceDirective,{field:\"slotId\",title:\"Slot\",name:\"Slot\",allowMultiple:false,textField:\"text\",dataSource:this.state.timeData,idField:\"id\",colorField:\"Color\"})),React.createElement(Inject,{services:[Week,Agenda]})):React.createElement(\"div\",{className:\"container main\"},\"Kindly complete profile first\"))));}}]);return TimeSlots;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.User.userData,parent:state.User.parentData,otherUser:state.User.otherUserInfoData,student:state.Student};};export default connect(mapStateToProps,null)(TimeSlots);","map":{"version":3,"sources":["/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/src/interviewer/profile/timeSlots.js"],"names":["React","Component","Header","Button","Media","Row","Col","FormControl","FormGroup","InputGroup","connect","ToastContainer","Week","Month","Agenda","TimelineViews","TimelineMonth","ScheduleComponent","ViewsDirective","ViewDirective","ResourcesDirective","ResourceDirective","Inject","moment","extend","ImageCropper","DownloadLink","DatePickerComponent","TimePickerComponent","showErrorToast","ZoomInAndOut","theRapidHireApiService","CONSTANTS","TimeSlots","props","arguments","handleChange","date","console","log","setState","startDate","state","isOpen","Date","timeData","user","otherUser","userId","getUserProfileData","getSlotDetails","then","response","data","status","userProfile","result","catch","err","interviewerId","forEach","item","index","launchDate","startTimeStamp","day","getUTCDate","month","getMonth","year","getFullYear","min","getMinutes","hour","getHours","endTimeStamp","endDate","push","slotId","text","StartTime","EndTime","Color","args","valueOf","cancel","self","slotRegisteredDate","format","isLoading","error","schedule","scheduleObj","onPopupOpen","bind","dataSource","mapStateToProps","User","userData","parent","parentData","otherUserInfoData","student","Student"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Header from '../header/header';\nimport {\n  Button,\n  Media,\n  Row,\n  Col,\n  FormControl,FormGroup,\n  InputGroup\n} from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\n\nimport { Week, Month, Agenda,TimelineViews, TimelineMonth, ScheduleComponent, ViewsDirective, ViewDirective, ResourcesDirective, ResourceDirective, Inject } from '@syncfusion/ej2-react-schedule';\n\nimport moment from 'moment';\n\nimport { extend } from '@syncfusion/ej2-base';\nimport \"@syncfusion/ej2-base/styles/material.css\";\nimport \"@syncfusion/ej2-buttons/styles/material.css\";\nimport \"@syncfusion/ej2-calendars/styles/material.css\";\nimport \"@syncfusion/ej2-dropdowns/styles/material.css\";\nimport \"@syncfusion/ej2-inputs/styles/material.css\";\nimport \"@syncfusion/ej2-lists/styles/material.css\";\nimport \"@syncfusion/ej2-navigations/styles/material.css\";\nimport \"@syncfusion/ej2-popups/styles/material.css\";\n//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\nimport \"@syncfusion/ej2-react-schedule/styles/material.css\";\n//import '../node_modules/@syncfusion/ej2/material.css';\n//import CompetencyRecommendations from '../profile/competency/recommendations/competencyWiseRecommendations';\nimport ImageCropper from '../../common/cropper/imageCropper';\nimport DownloadLink from \"react-download-link\";\n//import Img from '../../common/cropper/img';\nimport { DatePickerComponent } from '@syncfusion/ej2-react-calendars';\nimport { TimePickerComponent } from '@syncfusion/ej2-react-calendars';\n//import moment from 'moment';\nimport {\n  showErrorToast ,ZoomInAndOut \n} from '../../common/commonFunctions';\nimport theRapidHireApiService from '../../common/core/api/apiService';\nimport CONSTANTS from '../../common/core/config/appConfig';\n\n\nclass TimeSlots extends Component {\n   constructor(props) {\n        super(...arguments);\n    this.state = {      \n      isOpen: false,\n      startDate: new Date(),\n      timeData:[]\n    };   \n    \n  }\n \n  componentDidMount() {  \n    let user= this.props.otherUser? this.props.otherUser: this.props.user;\n    if(user){\n      let userId =user.userId;       \n      this.setState({userId: userId,user:user});\n      this.getUserProfileData(userId);\n      this.getSlotDetails(userId);  \n    }   \n  }\n\n  getUserProfileData(userId){\n    theRapidHireApiService('getUserSkillsById',{userId})\n    .then(response => {     \n      if (response.data.status === 'Success') {\n        console.log(response.data);       \n         let userProfile = response.data.result[0];     \n        this.setState({userProfile:userProfile                  \n         });        \n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  } \n\n  getSlotDetails(userId){\n    let interviewerId= userId;\n    theRapidHireApiService('getTimeSlotByInterviewer',{interviewerId})\n    .then(response => {     \n      if (response.data.status === 'Success') {\n        console.log(response);\n        let timeData=  [];\n        response.data.result.forEach(function(item,index){    \n          let launchDate = new Date(item.startTimeStamp);     \n          let day = launchDate.getUTCDate();\n          let month = launchDate.getMonth();\n          let year = launchDate.getFullYear(); \n          let min = launchDate.getMinutes();\n          let hour = launchDate.getHours();\n\n          let startDate= new Date(year,month,day,hour,min);\n\n           launchDate = new Date(item.endTimeStamp);     \n           day = launchDate.getUTCDate();\n           month = launchDate.getMonth();\n           year = launchDate.getFullYear(); \n           min = launchDate.getMinutes();\n           hour = launchDate.getHours();\n\n          let endDate= new Date(year,month,day,hour,min);\n\n          timeData.push({\n              slotId: item.slotId, \n              text: 'Photogenic',     \n              userId:  item.userId,     \n              StartTime: startDate,\n              EndTime: endDate,              \n              Color :item.userId ? '#1aaa55' :'#7fa900'\n            })\n      });\n      this.setState({timeData:timeData});\n      }\n     \n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n \n  handleChange = date => {\n    console.log(date);\n    this.setState({\n      startDate: date\n    });\n  };\n\n  onPopupOpen(args) {\n    console.log(args);   \n\n     if(moment(args.data.StartTime).valueOf() <  moment().valueOf()){\n      args.cancel = true;\n      showErrorToast('Selected time can not be less than current time.');\n      return false;\n     }  \n\n     console.log(args.data.StartTime);\n    let self= this;\n    let startDate= new Date(args.data.StartTime);\n   \n    let endDate= new Date(args.data.EndTime);\n \n     console.log(moment(args.data.StartTime));   \n\n    let data={\n      slotRegisteredDate:new Date(moment(args.data.StartTime).format(\"DD-MMM-YYYY\")).valueOf(),\n      startTimeStamp: moment(startDate).valueOf(),\n      endTimeStamp: moment(endDate).valueOf(),\n      interviewerId: this.state.userId\n    };\n   if(!args.data.slotId){\n      theRapidHireApiService('createSlot', data)\n      .then(response => {\n        if (response.data.status===\"Success\") {      \n            self.setState({ isLoading: false });    \n            self.getSlotDetails(self.state.userId);   \n        } \n      })\n      .catch(error => {\n      // self.setState({ isLoading: false });\n        console.log(error);\n      });\n    }else{\n      let slotId= args.data.slotId\n      console.log(args.data);     \n      \n      theRapidHireApiService('deleteTimeSlotByInterviewer',{slotId})\n      .then(response => {\n        if (response.data.status===\"Success\") {      \n            self.setState({ isLoading: false });    \n            self.getSlotDetails(self.state.userId);   \n        } \n      })\n      .catch(error => {\n      // self.setState({ isLoading: false });\n        console.log(error);\n      });\n    }\n    args.cancel = true;\n}\n\n\n\n \n  render() {\n    return (\n      <div className=\"wrapper\">\n       <ToastContainer\n          autoClose={5000}\n          className=\"custom-toaster-main-cls\"\n          toastClassName=\"custom-toaster-bg\"\n          transition={ZoomInAndOut}\n        /> \n        <Header {...this.props} />     \n          <div className=\"main-panel\">\n           <div className=\"w3-content main-panel1\"> \n           {this.state.userProfile ? \n              <ScheduleComponent width='100%' height='800px' \n                ref={schedule => this.scheduleObj = schedule}\n                popupOpen={this.onPopupOpen.bind(this)} showQuickInfo={false} \n                //  eventRendered={this.onEventRendered.bind(this)} selectedDate={new Date(2018, 3, 1)}\n                onChange={this.handleChange.bind(this)} eventSettings={{ dataSource: this.state.timeData }} \n                >\n                      <ViewsDirective>\n                      <ViewDirective option='Day' startHour='09:30' endHour='18:00' />\n                          <ViewDirective option='Week'/>                \n                          <ViewDirective option='Agenda'/>\n                      </ViewsDirective>\n                      <ResourcesDirective>\n                          <ResourceDirective field='slotId' title='Slot' name='Slot' allowMultiple={false} textField='text' dataSource={this.state.timeData} idField='id' colorField='Color'>\n                          </ResourceDirective>\n                      </ResourcesDirective> \n                      <Inject  services={[Week,Agenda]}/>\n                </ScheduleComponent> :\n                <div className=\"container main\">\n                  Kindly complete profile first\n                  </div>\n             }\n              </div>\n          </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    user: state.User.userData,\n    parent: state.User.parentData,\n    otherUser: state.User.otherUserInfoData,\n    student: state.Student\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  null\n)(TimeSlots);\n"]},"metadata":{},"sourceType":"module"}