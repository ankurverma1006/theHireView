{"ast":null,"code":"import _defineProperty from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import PropTypes from'proptypes';import{connect}from'react-redux';import classnames from'classnames';import _ from'lodash';//import { Player } from 'video-react';\n//import 'video-react/dist/video-react.css'; // import css\nvar CallWindow=/*#__PURE__*/function(_Component){_inherits(CallWindow,_Component);function CallWindow(props,context){var _this;_classCallCheck(this,CallWindow);_this=_possibleConstructorReturn(this,_getPrototypeOf(CallWindow).call(this,props,context));_this.state=_defineProperty({Video:true,Audio:true},\"Audio\",{echoCancellation:true});_this.btns=[{type:'Video',icon:'fa-video-camera'},{type:'Audio',icon:'fa-microphone'}];return _this;}_createClass(CallWindow,[{key:\"componentDidMount\",value:function componentDidMount(){this.setMediaStream();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var currentConfig=this.props.config;// Initialize when the call started\nif(!currentConfig&&nextProps.config){var config=nextProps.config,mediaDevice=nextProps.mediaDevice;_.forEach(config,function(conf,type){return mediaDevice.toggle(_.capitalize(type),conf);});this.setState({Video:config.video,Audio:config.audio});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.setMediaStream();}},{key:\"setMediaStream\",value:function setMediaStream(){var _this$props=this.props,peerSrc=_this$props.peerSrc,localSrc=_this$props.localSrc;if(this.peerVideo&&peerSrc)this.peerVideo.srcObject=peerSrc;if(this.localVideo&&localSrc)this.localVideo.srcObject=localSrc;}/**\n   * Turn on/off a media device\n   * @param {String} deviceType - Type of the device eg: Video, Audio\n   */},{key:\"toggleMediaDevice\",value:function toggleMediaDevice(deviceType){var mediaDevice=this.props.mediaDevice;var deviceState=_.get(this.state,deviceType);this.setState(_defineProperty({},deviceType,!deviceState));mediaDevice.toggle(deviceType);}},{key:\"renderControlButtons\",value:function renderControlButtons(){var _this2=this;var getClass=function getClass(icon,type){return classnames(\"btn-action fa \".concat(icon),{disable:!_.get(_this2.state,type)});};return this.btns.map(function(btn){return React.createElement(\"button\",{key:\"btn\".concat(btn.type),type:\"button\",className:getClass(btn.icon,btn.type),onClick:function onClick(){return _this2.toggleMediaDevice(btn.type);}});});}},{key:\"render\",value:function render(){var _this3=this;var _this$props2=this.props,status=_this$props2.status,endCall=_this$props2.endCall,startCallInterviewer=_this$props2.startCallInterviewer;return React.createElement(\"div\",{className:classnames('call-window',status)},React.createElement(\"video\",{id:\"peerVideo\",ref:function ref(el){return _this3.peerVideo=el;},autoPlay:true}),\" */}\",React.createElement(\"video\",{id:\"localVideo\",ref:function ref(el){return _this3.localVideo=el;},autoPlay:true,muted:true}),React.createElement(\"div\",{className:\"video-control\"},this.renderControlButtons(),React.createElement(\"button\",{type:\"button\",className:\"btn-action hangup fa fa-phone\",onClick:function onClick(){return endCall(true);}}),this.props.user&&this.props.user.roleId==2?React.createElement(\"button\",{type:\"button\",className:\"btn-action startup fa fa-phone\",onClick:function onClick(){return startCallInterviewer(true);}}):null));}}]);return CallWindow;}(Component);// export default CallWindow;\nvar mapStateToProps=function mapStateToProps(state){return{user:state.User.userData};};export default connect(mapStateToProps,null)(CallWindow);","map":{"version":3,"sources":["/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/src/videoChat/js/CallWindow.js"],"names":["React","Component","PropTypes","connect","classnames","_","CallWindow","props","context","state","Video","Audio","echoCancellation","btns","type","icon","setMediaStream","nextProps","currentConfig","config","mediaDevice","forEach","conf","toggle","capitalize","setState","video","audio","peerSrc","localSrc","peerVideo","srcObject","localVideo","deviceType","deviceState","get","getClass","disable","map","btn","toggleMediaDevice","status","endCall","startCallInterviewer","el","renderControlButtons","user","roleId","mapStateToProps","User","userData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'proptypes';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport _ from 'lodash';\n//import { Player } from 'video-react';\n//import 'video-react/dist/video-react.css'; // import css\n\n\nclass CallWindow extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      Video: true,\n      Audio: true,\n      Audio: {echoCancellation:true}      \n    };\n\n    this.btns = [\n      { type: 'Video', icon: 'fa-video-camera' },\n      { type: 'Audio', icon: 'fa-microphone' }\n    ];  \n  }\n\n\n\n\n  componentDidMount() {\n    this.setMediaStream();   \n   }\n\n  componentWillReceiveProps(nextProps) {\n    const { config: currentConfig } = this.props;\n    // Initialize when the call started\n    if (!currentConfig && nextProps.config) {\n      const { config, mediaDevice } = nextProps;\n      _.forEach(config, (conf, type) => mediaDevice.toggle(_.capitalize(type), conf));\n\n      this.setState({\n        Video: config.video,\n        Audio: config.audio\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.setMediaStream();\n  }\n \n  setMediaStream() {\n    const { peerSrc, localSrc } = this.props;\n    if (this.peerVideo && peerSrc) this.peerVideo.srcObject = peerSrc;\n    if (this.localVideo && localSrc) this.localVideo.srcObject = localSrc; \n  }\n\n  /**\n   * Turn on/off a media device\n   * @param {String} deviceType - Type of the device eg: Video, Audio\n   */\n  toggleMediaDevice(deviceType) {\n    const { mediaDevice } = this.props;\n    const deviceState = _.get(this.state, deviceType);\n    this.setState({ [deviceType]: !deviceState });\n    mediaDevice.toggle(deviceType);\n  }\n\n  renderControlButtons() {\n    const getClass = (icon, type) => classnames(`btn-action fa ${icon}`, {\n      disable: !_.get(this.state, type)\n    });\n\n    return this.btns.map(btn => (\n      <button\n        key={`btn${btn.type}`}\n        type=\"button\"\n        className={getClass(btn.icon, btn.type)}\n        onClick={() => this.toggleMediaDevice(btn.type)}\n      />\n    ));\n  }\n\n  render() {\n    const { status, endCall,startCallInterviewer } = this.props;\n    return (\n      <div className={classnames('call-window', status)}>\n        <video id=\"peerVideo\" ref={el => this.peerVideo = el} autoPlay /> */}\n        {/* <Player\n          ref={player => {\n            this.player = player;\n          }}\n          autoPlay\n        >\n          <source src={this.state.source} /></Player> */}\n\n        <video id=\"localVideo\" ref={el => this.localVideo = el} autoPlay muted />\n        <div className=\"video-control\">\n          {this.renderControlButtons()}\n          <button\n            type=\"button\"\n            className=\"btn-action hangup fa fa-phone\"\n            onClick={() => endCall(true)}\n          />\n    {this.props.user && this.props.user.roleId == 2 ?\n           <button\n            type=\"button\"\n            className=\"btn-action startup fa fa-phone\"\n            onClick={() => startCallInterviewer(true)}\n          ></button>: null}\n        </div> \n      </div>\n    );\n  }\n}\n\nCallWindow.propTypes = {\n  status: PropTypes.string.isRequired,\n  localSrc: PropTypes.object, // eslint-disable-line\n  peerSrc: PropTypes.object, // eslint-disable-line\n  config: PropTypes.object, // eslint-disable-line\n  mediaDevice: PropTypes.object, // eslint-disable-line\n  endCall: PropTypes.func.isRequired,\n  startCallInterviewer: PropTypes.func.isRequired\n};\n\n// export default CallWindow;\n\nconst mapStateToProps = state => {\n  return {\n    user: state.User.userData    \n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  null\n)(CallWindow);"]},"metadata":{},"sourceType":"module"}