{"ast":null,"code":"import _classCallCheck from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Cropper from'react-cropper';import'cropperjs/dist/cropper.css';import{Button,Modal}from'react-bootstrap';import Select from'react-select';import CONSTANTS from'../../common/core/config/appConfig';import _ from'lodash';var options=[{value:CONSTANTS.mediaAlbum,label:React.createElement(\"div\",{className:\"adselectIcon\"},\"General \",React.createElement(\"span\",{className:\"icon-image_tag\"}))},{value:CONSTANTS.certificateAlbum,label:React.createElement(\"div\",{className:\"adselectIcon\"},\"Certificate \",React.createElement(\"span\",{className:\"icon-certificate\"}))},{value:CONSTANTS.badgeAlbum,label:React.createElement(\"div\",{className:\"adselectIcon\"},\"Badge \",React.createElement(\"span\",{className:\"icon-badges\"}))},{value:CONSTANTS.trophieAlbum,label:React.createElement(\"div\",{className:\"adselectIcon\"},\"Trophy \",React.createElement(\"span\",{className:\"icon-trophy\"}))}// {\n//   value: 'Videos',\n//   label: (\n//     <div className=\"adselectIcon\">\n//       Videos <span className=\"icon-video_tag\" />\n//     </div>\n//   )\n// }\n];var ImageCropper=/*#__PURE__*/function(_Component){_inherits(ImageCropper,_Component);function ImageCropper(props){var _this;_classCallCheck(this,ImageCropper);_this=_possibleConstructorReturn(this,_getPrototypeOf(ImageCropper).call(this,props));_this.closeCropModal=function(){_this.setState({cropModal:false,imageSource:''});};_this.handleImageChange=function(event){var file=event.target.files[0];var fileName=file.name;var fileType=file.type;if(file){var reader=new FileReader();reader.readAsDataURL(event.target.files[0]);reader.onload=function(event){_this.setState({imageSource:event.target.result,imageName:fileName,imageType:fileType});};}};_this.handleChange=function(selectedOption){if(selectedOption){var aspectRatio=16/9;var tagValue=selectedOption.value;if(tagValue===CONSTANTS.mediaAlbum){aspectRatio=16/9;}else{aspectRatio=1/1;}_this.setState({selectedOption:selectedOption,tagValue:tagValue,aspectRatio:aspectRatio});}};_this.state={cropModal:true,cropBoxWidth:'',cropBoxHeight:'',imageSource:'',imageName:'',imageType:'',modalSize:'medium',aspectRatio:'',selectedOption:{value:'media',label:React.createElement(\"div\",{className:\"adselectIcon\"},\"General \",React.createElement(\"span\",{className:\"icon-image_tag\"}))},tagValue:''};return _this;}_createClass(ImageCropper,[{key:\"componentDidMount\",value:function componentDidMount(){var imageSource=this.props.imageSource;var cropBoxWidth=this.props.cropBoxWidth;var cropBoxHeight=this.props.cropBoxHeight;var imageType=this.props.imageType;var imageName=this.props.imageName;var modalSize=this.props.modalSize;var aspectRatio=this.props.aspectRatio;if(imageSource!==''){this.setState({imageSource:imageSource,imageName:imageName,imageType:imageType,cropBoxWidth:cropBoxWidth,cropBoxHeight:cropBoxHeight,modalSize:modalSize,aspectRatio:aspectRatio});}if(this.props.labelName){this.handleChange(this.state.selectedOption);}}},{key:\"cropImage\",value:function cropImage(action){var cropImageResult=this.refs.cropper&&this.refs.cropper.getCroppedCanvas({fillColor:'#fff',imageSmoothingEnabled:false,imageSmoothingQuality:'high'}).toDataURL(this.state.imageType);if(cropImageResult!==''){var croppedImage=this.dataURLtoFile(cropImageResult,this.state.imageName);if(this.props.labelName==='ADD_MEDIA'){this.props.uploadImageToAzure(croppedImage,this.state.tagValue);}else{this.props.uploadImageToAzure(croppedImage);}this.setState({cropModal:false});}else{this.props.uploadImageToAzure('');}}},{key:\"dataURLtoFile\",value:function dataURLtoFile(dataurl,filename){var arr=dataurl?dataurl.split(','):dataurl,mime=arr[0].match(/:(.*?);/)[1],bstr=atob(arr[1]),n=bstr.length,u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n);}var blob=new Blob([u8arr],{type:this.state.imageType});blob.name=filename;return blob;// return new File([u8arr], filename, { type: mime });\n}},{key:\"render\",value:function render(){var _this2=this;var selectedOption=this.state.selectedOption;return React.createElement(Modal,{bsSize:this.state.modalSize,show:this.state.cropModal,onHide:this.closeCropModal,backdrop:\"static\",keyboard:false},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,{className:this.props.labelName==='ADD_MEDIA'?'addMediaTxt':'subtitle text-center'},this.props.labelName==='ADD_MEDIA'?'ADD MEDIA':'Crop Photo')),React.createElement(Modal.Body,null,React.createElement(Cropper,{className:\"img-responsive1\",ref:\"cropper\",minCropBoxWidth:this.state.cropBoxWidth,minCropBoxHeight:this.state.cropBoxHeight,src:this.state.imageSource,style:{height:400,width:'100%',opacity:1},aspectRatio:this.state.aspectRatio,guides:true,viewMode:1,background:false,zoomable:true,cropBoxMovable:false,cropBoxResizable:false,highlight:false,dragMode:\"move\",movable:true})),React.createElement(Modal.Footer,null,React.createElement(\"div\",{className:\"flex justify-content-between align-center\"},React.createElement(\"div\",{className:\"left\"},this.props.labelName==='ADD_MEDIA'?React.createElement(\"div\",{className:\"custom-select selectAddAch\"},React.createElement(\"span\",{className:\"icon-down_arrow selectIcon\"}),React.createElement(Select,{className:\"form-control adfigCaption\",placeholder:\"Select Media Type\",value:selectedOption,onChange:this.handleChange,options:options,clearable:false})):null),React.createElement(\"div\",{className:\"right flex align-center\"},React.createElement(\"div\",{className:\"custom-upload mr-1\"},React.createElement(\"input\",{type:\"file\",accept:\"image/*\",value:\"\",onChange:this.handleImageChange.bind(this)}),React.createElement(Button,{bstyle:\"default\"},\"Change Photo\")),this.props.labelName?React.createElement(Button,{bsStyle:\"primary\",onClick:_.debounce(function(event){return _this2.cropImage();},1000),disabled:selectedOption?false:true},\"Apply\"):React.createElement(Button,{bsStyle:\"primary\",onClick:_.debounce(function(event){return _this2.cropImage();},1000)},\"Apply\")))));}}]);return ImageCropper;}(Component);export default ImageCropper;","map":{"version":3,"sources":["/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/src/common/cropper/imageCropper.js"],"names":["React","Component","Cropper","Button","Modal","Select","CONSTANTS","_","options","value","mediaAlbum","label","certificateAlbum","badgeAlbum","trophieAlbum","ImageCropper","props","closeCropModal","setState","cropModal","imageSource","handleImageChange","event","file","target","files","fileName","name","fileType","type","reader","FileReader","readAsDataURL","onload","result","imageName","imageType","handleChange","selectedOption","aspectRatio","tagValue","state","cropBoxWidth","cropBoxHeight","modalSize","labelName","action","cropImageResult","refs","cropper","getCroppedCanvas","fillColor","imageSmoothingEnabled","imageSmoothingQuality","toDataURL","croppedImage","dataURLtoFile","uploadImageToAzure","dataurl","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","blob","Blob","height","width","opacity","bind","debounce","cropImage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Cropper from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport Select from 'react-select';\r\nimport CONSTANTS from '../../common/core/config/appConfig';\r\nimport _ from 'lodash';\r\nconst options = [\r\n  {\r\n    value: CONSTANTS.mediaAlbum,\r\n    label: (\r\n      <div className=\"adselectIcon\">\r\n        General <span className=\"icon-image_tag\" />\r\n      </div>\r\n    )\r\n  },\r\n  {\r\n    value: CONSTANTS.certificateAlbum,\r\n    label: (\r\n      <div className=\"adselectIcon\">\r\n        Certificate <span className=\"icon-certificate\" />\r\n      </div>\r\n    )\r\n  },\r\n  {\r\n    value: CONSTANTS.badgeAlbum,\r\n    label: (\r\n      <div className=\"adselectIcon\">\r\n        Badge <span className=\"icon-badges\" />\r\n      </div>\r\n    )\r\n  },\r\n  {\r\n    value: CONSTANTS.trophieAlbum,\r\n    label: (\r\n      <div className=\"adselectIcon\">\r\n        Trophy <span className=\"icon-trophy\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // {\r\n  //   value: 'Videos',\r\n  //   label: (\r\n  //     <div className=\"adselectIcon\">\r\n  //       Videos <span className=\"icon-video_tag\" />\r\n  //     </div>\r\n  //   )\r\n  // }\r\n];\r\nclass ImageCropper extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cropModal: true,\r\n      cropBoxWidth: '',\r\n      cropBoxHeight: '',\r\n      imageSource: '',\r\n      imageName: '',\r\n      imageType: '',\r\n      modalSize: 'medium',\r\n      aspectRatio: '',\r\n      selectedOption: {\r\n        value: 'media',\r\n        label: (\r\n          <div className=\"adselectIcon\">\r\n            General <span className=\"icon-image_tag\" />\r\n          </div>\r\n        )\r\n      },\r\n      tagValue: ''\r\n    };\r\n  }\r\n\r\n  closeCropModal = () => {\r\n    this.setState({ cropModal: false, imageSource: '' });\r\n  };\r\n\r\n  componentDidMount() {\r\n    let imageSource = this.props.imageSource;\r\n    let cropBoxWidth = this.props.cropBoxWidth;\r\n    let cropBoxHeight = this.props.cropBoxHeight;\r\n    let imageType = this.props.imageType;\r\n    let imageName = this.props.imageName;\r\n    let modalSize = this.props.modalSize;\r\n    let aspectRatio = this.props.aspectRatio;\r\n\r\n    if (imageSource !== '') {\r\n      this.setState({\r\n        imageSource,\r\n        imageName,\r\n        imageType,\r\n        cropBoxWidth,\r\n        cropBoxHeight,\r\n        modalSize,\r\n        aspectRatio\r\n      });\r\n    }\r\n    if (this.props.labelName) {\r\n      this.handleChange(this.state.selectedOption);\r\n    }\r\n  }\r\n\r\n  handleImageChange = event => {\r\n    const file = event.target.files[0];\r\n    const fileName = file.name;\r\n    const fileType = file.type;\r\n    if (file) {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = event => {\r\n        this.setState({\r\n          imageSource: event.target.result,\r\n          imageName: fileName,\r\n          imageType: fileType\r\n        });\r\n      };\r\n    }\r\n  };\r\n\r\n  cropImage(action) {\r\n    let cropImageResult = this.refs.cropper && this.refs.cropper\r\n      .getCroppedCanvas({\r\n        fillColor: '#fff',\r\n        imageSmoothingEnabled: false,\r\n        imageSmoothingQuality: 'high'\r\n      })\r\n      .toDataURL(this.state.imageType);\r\n\r\n    if (cropImageResult !== '') {\r\n      let croppedImage = this.dataURLtoFile(\r\n        cropImageResult,\r\n        this.state.imageName\r\n      );\r\n      if (this.props.labelName === 'ADD_MEDIA') {\r\n        this.props.uploadImageToAzure(croppedImage, this.state.tagValue);\r\n      } else {\r\n        this.props.uploadImageToAzure(croppedImage);\r\n      }\r\n\r\n      this.setState({\r\n        cropModal: false\r\n      });\r\n    } else {\r\n      this.props.uploadImageToAzure('');\r\n    }\r\n  }\r\n\r\n  dataURLtoFile(dataurl, filename) {\r\n    var arr = dataurl ? dataurl.split(',') : dataurl,\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    var blob = new Blob([u8arr], { type: this.state.imageType });\r\n    blob.name = filename;\r\n    return blob;\r\n    // return new File([u8arr], filename, { type: mime });\r\n  }\r\n\r\n  handleChange = selectedOption => {\r\n    if (selectedOption) {\r\n      let aspectRatio = 16 / 9;\r\n      let tagValue = selectedOption.value;\r\n      if (tagValue === CONSTANTS.mediaAlbum) {\r\n        aspectRatio = 16 / 9;\r\n      } else {\r\n        aspectRatio = 1 / 1;\r\n      }\r\n      this.setState({ selectedOption, tagValue, aspectRatio });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { selectedOption } = this.state;\r\n    return (\r\n      <Modal\r\n        bsSize={this.state.modalSize}\r\n        show={this.state.cropModal}\r\n        onHide={this.closeCropModal}\r\n        backdrop=\"static\"\r\n        keyboard={false}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title\r\n            className={\r\n              this.props.labelName === 'ADD_MEDIA'\r\n                ? 'addMediaTxt'\r\n                : 'subtitle text-center'\r\n            }\r\n          >\r\n            {this.props.labelName === 'ADD_MEDIA' ? 'ADD MEDIA' : 'Crop Photo'}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Cropper\r\n            className=\"img-responsive1\"\r\n            ref=\"cropper\"\r\n            minCropBoxWidth={this.state.cropBoxWidth}\r\n            minCropBoxHeight={this.state.cropBoxHeight}\r\n            src={this.state.imageSource}\r\n            style={{ height: 400, width: '100%',opacity: 1 }}\r\n            aspectRatio={this.state.aspectRatio}\r\n            guides={true}\r\n            viewMode={1}\r\n            background={false}\r\n            zoomable={true}\r\n            cropBoxMovable={false}\r\n            cropBoxResizable={false}\r\n            highlight={false}\r\n            dragMode=\"move\"\r\n            movable={true}\r\n          />\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"flex justify-content-between align-center\">\r\n            <div className=\"left\">\r\n              {this.props.labelName === 'ADD_MEDIA' ? (\r\n                <div className=\"custom-select selectAddAch\">\r\n                  <span className=\"icon-down_arrow selectIcon\" />\r\n                  {/* selectAddAch */}\r\n                  {/* adfigCaption  */}\r\n                  <Select\r\n                    className=\"form-control adfigCaption\"\r\n                    placeholder=\"Select Media Type\"\r\n                    value={selectedOption}\r\n                    onChange={this.handleChange}\r\n                    options={options}\r\n                    clearable={false}\r\n                  />\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n            <div className=\"right flex align-center\">\r\n              <div className=\"custom-upload mr-1\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  value=\"\"\r\n                  onChange={this.handleImageChange.bind(this)}\r\n                />\r\n\r\n                <Button bstyle=\"default\">Change Photo</Button>\r\n              </div>\r\n              {this.props.labelName ? (\r\n                <Button\r\n                  bsStyle=\"primary\"\r\n                  onClick=\r\n                  {_.debounce((event) => this.cropImage(), 1000)} \r\n                   disabled={selectedOption ? false : true}\r\n                >\r\n                  Apply\r\n                </Button>\r\n              ) : (\r\n                <Button bsStyle=\"primary\" onClick= {_.debounce((event) => this.cropImage(), 1000)} >\r\n                  Apply\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageCropper;\r\n"]},"metadata":{},"sourceType":"module"}