{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Ankur\\\\Desktop\\\\therapidhire\\\\therapidhireui\\\\TheRapidHireUI\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Header from'../header/header';import{Button,Media,Row,Col,FormControl,FormGroup,InputGroup}from'react-bootstrap';import{connect}from'react-redux';import{Week,Month,Agenda,TimelineViews,TimelineMonth,ScheduleComponent,ViewsDirective,ViewDirective,ResourcesDirective,ResourceDirective,Inject}from'@syncfusion/ej2-react-schedule';import moment from'moment';import{extend,createElement}from'@syncfusion/ej2-base';import'@syncfusion/ej2-base/styles/material.css';import'@syncfusion/ej2-buttons/styles/material.css';import'@syncfusion/ej2-calendars/styles/material.css';import'@syncfusion/ej2-dropdowns/styles/material.css';import'@syncfusion/ej2-inputs/styles/material.css';import'@syncfusion/ej2-lists/styles/material.css';import'@syncfusion/ej2-navigations/styles/material.css';import'@syncfusion/ej2-popups/styles/material.css';//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\nimport'@syncfusion/ej2-react-schedule/styles/material.css';import{ToastContainer}from'react-toastify';//import '../node_modules/@syncfusion/ej2/material.css';\n//import CompetencyRecommendations from '../profile/competency/recommendations/competencyWiseRecommendations';\nimport ImageCropper from'../../common/cropper/imageCropper';import DownloadLink from'react-download-link';//import Img from '../../common/cropper/img';\nimport{DatePickerComponent}from'@syncfusion/ej2-react-calendars';import{TimePickerComponent}from'@syncfusion/ej2-react-calendars';//import moment from 'moment';\nimport{showErrorToast,ZoomInAndOut}from'../../common/commonFunctions';import theRapidHireApiService from'../../common/core/api/apiService';import CONSTANTS from'../../common/core/config/appConfig';var TimeSlots=/*#__PURE__*/function(_Component){_inherits(TimeSlots,_Component);function TimeSlots(props){var _this;_classCallCheck(this,TimeSlots);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeSlots).apply(this,arguments));_this.handleChange=function(date){console.log(date);_this.setState({startDate:date});};_this.state={isOpen:false,startDate:new Date(),timeData:[]};return _this;}_createClass(TimeSlots,[{key:\"componentDidMount\",value:function componentDidMount(){var user=this.props.otherUser?this.props.otherUser:this.props.user;if(user){var userId=user.userId;this.setState({userId:userId,user:user});this.getUserProfileData(userId);this.getSlotDetails(userId);}}},{key:\"getUserProfileData\",value:function getUserProfileData(userId){var _this2=this;theRapidHireApiService('getUserSkillsById',{userId:userId}).then(function(response){if(response.data.status==='Success'){console.log(response.data);var userProfile=response.data.result[0];_this2.setState({userProfile:userProfile});}}).catch(function(err){console.log(err);});}},{key:\"getSlotDetails\",value:function getSlotDetails(userId){var _this3=this;var interviewerId=userId;theRapidHireApiService('getTimeSlotByInterviewer',{interviewerId:interviewerId}).then(function(response){if(response.data.status==='Success'){console.log(response);var timeData=[];response.data.result.forEach(function(item,index){var launchDate=new Date(item.startTimeStamp);var day=launchDate.getUTCDate();var month=launchDate.getMonth();var year=launchDate.getFullYear();var min=launchDate.getMinutes();var hour=launchDate.getHours();var startDate=new Date(year,month,day,hour,min);launchDate=new Date(item.endTimeStamp);day=launchDate.getUTCDate();month=launchDate.getMonth();year=launchDate.getFullYear();min=launchDate.getMinutes();hour=launchDate.getHours();var endDate=new Date(year,month,day,hour,min);timeData.push({Subject:item.userId?'Booked':'Available',slotId:item.slotId,text:'Photogenic',userId:item.userId,StartTime:startDate,EndTime:endDate,Color:item.userId?'#1aaa55':'#7fa900'});});_this3.setState({timeData:timeData});}}).catch(function(err){console.log(err);});}},{key:\"onPopupOpen\",value:function onPopupOpen(args){console.log(args);if(moment(args.data.StartTime).valueOf()<moment().valueOf()){args.cancel=true;showErrorToast('Selected time can not be less than current time.');return false;}console.log(args.data.StartTime);var self=this;var startDate=new Date(args.data.StartTime);var endDate=new Date(args.data.EndTime);console.log(moment(args.data.StartTime));var data={slotRegisteredDate:new Date(moment(args.data.StartTime).format('DD-MMM-YYYY')).valueOf(),startTimeStamp:moment(startDate).valueOf(),endTimeStamp:moment(endDate).valueOf(),interviewerId:this.state.userId};if(!args.data.slotId){theRapidHireApiService('createSlot',data).then(function(response){if(response.data.status==='Success'){self.setState({isLoading:false});self.getSlotDetails(self.state.userId);}}).catch(function(error){// self.setState({ isLoading: false });\nconsole.log(error);});}else{var slotId=args.data.slotId;console.log(!args.data.userId);if(!args.data.userId){theRapidHireApiService('deleteTimeSlotByInterviewer',{slotId:slotId}).then(function(response){if(response.data.status==='Success'){self.setState({isLoading:false});self.getSlotDetails(self.state.userId);}}).catch(function(error){// self.setState({ isLoading: false });\nconsole.log(error);});}else{showErrorToast('Booked Slot can not be removed.');}}if(args.elementType=='workCells'||args.elementType=='monthCells'){var weekEnds=[0,6];if(weekEnds.indexOf(args.date.getDay())>=0){var ele=createElement('div',{innerHTML:\"<img src='https://ej2.syncfusion.com/demos/src/schedule/images/newyear.svg' />\",className:'templatewrap'});args.element.appendChild(ele);}}args.cancel=true;}},{key:\"onRenderCell\",value:function onRenderCell(args){}},{key:\"render\",value:function render(){var _this4=this;var self=this;return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(ToastContainer,{autoClose:5000,className:\"custom-toaster-main-cls\",toastClassName:\"custom-toaster-bg\",transition:ZoomInAndOut}),React.createElement(Header,this.props),React.createElement(\"div\",{className:\"main-panel\"},React.createElement(\"div\",{className:\"w3-content main-panel1\"},this.state.userProfile?React.createElement(ScheduleComponent,{width:\"100%\",height:\"800px\",ref:function ref(schedule){return _this4.scheduleObj=schedule;},popupOpen:this.onPopupOpen.bind(this),showQuickInfo:false//  eventRendered={this.onEventRendered.bind(this)} selectedDate={new Date(2018, 3, 1)}\n,onChange:this.handleChange.bind(this),eventSettings:{dataSource:this.state.timeData},renderCell:this.onRenderCell.bind(this),cssClass:\"schedule-cell-dimension\"},React.createElement(ViewsDirective,null,React.createElement(ViewDirective,{option:\"Day\",startHour:\"09:30\",endHour:\"18:00\"}),React.createElement(ViewDirective,{option:\"Week\"}),React.createElement(ViewDirective,{option:\"Agenda\"})),React.createElement(ResourcesDirective,null,React.createElement(ResourceDirective,{field:\"slotId\",title:\"Slot\",name:\"Slot\",allowMultiple:false,textField:\"text\",dataSource:self.state.timeData,idField:\"id\",colorField:\"Color\"})),React.createElement(Inject,{services:[Week,Agenda]})):React.createElement(\"div\",{className:\"container main\"},\"Kindly complete profile first\"))));}}]);return TimeSlots;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.User.userData,parent:state.User.parentData,otherUser:state.User.otherUserInfoData,student:state.Student};};export default connect(mapStateToProps,null)(TimeSlots);","map":{"version":3,"sources":["C:\\Users\\Ankur\\Desktop\\therapidhire\\therapidhireui\\TheRapidHireUI\\src\\interviewer\\profile\\timeSlots.js"],"names":["React","Component","Header","Button","Media","Row","Col","FormControl","FormGroup","InputGroup","connect","Week","Month","Agenda","TimelineViews","TimelineMonth","ScheduleComponent","ViewsDirective","ViewDirective","ResourcesDirective","ResourceDirective","Inject","moment","extend","createElement","ToastContainer","ImageCropper","DownloadLink","DatePickerComponent","TimePickerComponent","showErrorToast","ZoomInAndOut","theRapidHireApiService","CONSTANTS","TimeSlots","props","arguments","handleChange","date","console","log","setState","startDate","state","isOpen","Date","timeData","user","otherUser","userId","getUserProfileData","getSlotDetails","then","response","data","status","userProfile","result","catch","err","interviewerId","forEach","item","index","launchDate","startTimeStamp","day","getUTCDate","month","getMonth","year","getFullYear","min","getMinutes","hour","getHours","endTimeStamp","endDate","push","Subject","slotId","text","StartTime","EndTime","Color","args","valueOf","cancel","self","slotRegisteredDate","format","isLoading","error","elementType","weekEnds","indexOf","getDay","ele","innerHTML","className","element","appendChild","schedule","scheduleObj","onPopupOpen","bind","dataSource","onRenderCell","mapStateToProps","User","userData","parent","parentData","otherUserInfoData","student","Student"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Header from '../header/header';\r\nimport {\r\n  Button,\r\n  Media,\r\n  Row,\r\n  Col,\r\n  FormControl,\r\n  FormGroup,\r\n  InputGroup\r\n} from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n  Week,\r\n  Month,\r\n  Agenda,\r\n  TimelineViews,\r\n  TimelineMonth,\r\n  ScheduleComponent,\r\n  ViewsDirective,\r\n  ViewDirective,\r\n  ResourcesDirective,\r\n  ResourceDirective,\r\n  Inject\r\n} from '@syncfusion/ej2-react-schedule';\r\n\r\nimport moment from 'moment';\r\n\r\nimport { extend, createElement } from '@syncfusion/ej2-base';\r\nimport '@syncfusion/ej2-base/styles/material.css';\r\nimport '@syncfusion/ej2-buttons/styles/material.css';\r\nimport '@syncfusion/ej2-calendars/styles/material.css';\r\nimport '@syncfusion/ej2-dropdowns/styles/material.css';\r\nimport '@syncfusion/ej2-inputs/styles/material.css';\r\nimport '@syncfusion/ej2-lists/styles/material.css';\r\nimport '@syncfusion/ej2-navigations/styles/material.css';\r\nimport '@syncfusion/ej2-popups/styles/material.css';\r\n//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\r\nimport '@syncfusion/ej2-react-schedule/styles/material.css';\r\nimport { ToastContainer } from 'react-toastify';\r\n//import '../node_modules/@syncfusion/ej2/material.css';\r\n//import CompetencyRecommendations from '../profile/competency/recommendations/competencyWiseRecommendations';\r\nimport ImageCropper from '../../common/cropper/imageCropper';\r\nimport DownloadLink from 'react-download-link';\r\n//import Img from '../../common/cropper/img';\r\nimport { DatePickerComponent } from '@syncfusion/ej2-react-calendars';\r\nimport { TimePickerComponent } from '@syncfusion/ej2-react-calendars';\r\n//import moment from 'moment';\r\nimport { showErrorToast, ZoomInAndOut } from '../../common/commonFunctions';\r\nimport theRapidHireApiService from '../../common/core/api/apiService';\r\nimport CONSTANTS from '../../common/core/config/appConfig';\r\n\r\nclass TimeSlots extends Component {\r\n  constructor(props) {\r\n    super(...arguments);\r\n    this.state = {\r\n      isOpen: false,\r\n      startDate: new Date(),\r\n      timeData: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let user = this.props.otherUser ? this.props.otherUser : this.props.user;\r\n    if (user) {\r\n      let userId = user.userId;\r\n      this.setState({ userId: userId, user: user });\r\n      this.getUserProfileData(userId);\r\n      this.getSlotDetails(userId);\r\n    }\r\n  }\r\n\r\n  getUserProfileData(userId) {\r\n    theRapidHireApiService('getUserSkillsById', { userId })\r\n      .then(response => {\r\n        if (response.data.status === 'Success') {\r\n          console.log(response.data);\r\n          let userProfile = response.data.result[0];\r\n          this.setState({ userProfile: userProfile });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  getSlotDetails(userId) {\r\n    let interviewerId = userId;\r\n    theRapidHireApiService('getTimeSlotByInterviewer', { interviewerId })\r\n      .then(response => {\r\n        if (response.data.status === 'Success') {\r\n          console.log(response);\r\n          let timeData = [];\r\n          response.data.result.forEach(function(item, index) {\r\n            let launchDate = new Date(item.startTimeStamp);\r\n            let day = launchDate.getUTCDate();\r\n            let month = launchDate.getMonth();\r\n            let year = launchDate.getFullYear();\r\n            let min = launchDate.getMinutes();\r\n            let hour = launchDate.getHours();\r\n\r\n            let startDate = new Date(year, month, day, hour, min);\r\n\r\n            launchDate = new Date(item.endTimeStamp);\r\n            day = launchDate.getUTCDate();\r\n            month = launchDate.getMonth();\r\n            year = launchDate.getFullYear();\r\n            min = launchDate.getMinutes();\r\n            hour = launchDate.getHours();\r\n\r\n            let endDate = new Date(year, month, day, hour, min);\r\n\r\n            timeData.push({\r\n              Subject: item.userId ? 'Booked' : 'Available',\r\n              slotId: item.slotId,\r\n              text: 'Photogenic',\r\n              userId: item.userId,\r\n              StartTime: startDate,\r\n              EndTime: endDate,\r\n              Color: item.userId ? '#1aaa55' : '#7fa900'\r\n            });\r\n          });\r\n          this.setState({ timeData: timeData });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleChange = date => {\r\n    console.log(date);\r\n    this.setState({\r\n      startDate: date\r\n    });\r\n  };\r\n\r\n  onPopupOpen(args) {\r\n    console.log(args);\r\n\r\n    if (moment(args.data.StartTime).valueOf() < moment().valueOf()) {\r\n      args.cancel = true;\r\n      showErrorToast('Selected time can not be less than current time.');\r\n      return false;\r\n    }\r\n\r\n    console.log(args.data.StartTime);\r\n    let self = this;\r\n    let startDate = new Date(args.data.StartTime);\r\n\r\n    let endDate = new Date(args.data.EndTime);\r\n\r\n    console.log(moment(args.data.StartTime));\r\n\r\n    let data = {\r\n      slotRegisteredDate: new Date(\r\n        moment(args.data.StartTime).format('DD-MMM-YYYY')\r\n      ).valueOf(),\r\n      startTimeStamp: moment(startDate).valueOf(),\r\n      endTimeStamp: moment(endDate).valueOf(),\r\n      interviewerId: this.state.userId\r\n    };\r\n    if (!args.data.slotId) {\r\n      theRapidHireApiService('createSlot', data)\r\n        .then(response => {\r\n          if (response.data.status === 'Success') {\r\n            self.setState({ isLoading: false });\r\n            self.getSlotDetails(self.state.userId);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          // self.setState({ isLoading: false });\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      let slotId = args.data.slotId;\r\n      console.log(!args.data.userId);\r\n      if (!args.data.userId) {\r\n        theRapidHireApiService('deleteTimeSlotByInterviewer', { slotId })\r\n          .then(response => {\r\n            if (response.data.status === 'Success') {\r\n              self.setState({ isLoading: false });\r\n              self.getSlotDetails(self.state.userId);\r\n            }\r\n          })\r\n          .catch(error => {\r\n            // self.setState({ isLoading: false });\r\n            console.log(error);\r\n          });\r\n      } else {\r\n        showErrorToast('Booked Slot can not be removed.');\r\n      }\r\n    }\r\n    if (args.elementType == 'workCells' || args.elementType == 'monthCells') {\r\n      let weekEnds = [0, 6];\r\n      if (weekEnds.indexOf(args.date.getDay()) >= 0) {\r\n        let ele = createElement('div', {\r\n          innerHTML:\r\n            \"<img src='https://ej2.syncfusion.com/demos/src/schedule/images/newyear.svg' />\",\r\n          className: 'templatewrap'\r\n        });\r\n        args.element.appendChild(ele);\r\n      }\r\n    }\r\n    args.cancel = true;\r\n  }\r\n\r\n  onRenderCell(args) {}\r\n\r\n  render() {\r\n    let self = this;\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <ToastContainer\r\n          autoClose={5000}\r\n          className=\"custom-toaster-main-cls\"\r\n          toastClassName=\"custom-toaster-bg\"\r\n          transition={ZoomInAndOut}\r\n        />\r\n        <Header {...this.props} />\r\n        <div className=\"main-panel\">\r\n          <div className=\"w3-content main-panel1\">\r\n            {this.state.userProfile ? (\r\n              <ScheduleComponent\r\n                width=\"100%\"\r\n                height=\"800px\"\r\n                ref={schedule => (this.scheduleObj = schedule)}\r\n                popupOpen={this.onPopupOpen.bind(this)}\r\n                showQuickInfo={false}\r\n                //  eventRendered={this.onEventRendered.bind(this)} selectedDate={new Date(2018, 3, 1)}\r\n                onChange={this.handleChange.bind(this)}\r\n                eventSettings={{ dataSource: this.state.timeData }}\r\n                renderCell={this.onRenderCell.bind(this)}\r\n                cssClass=\"schedule-cell-dimension\"\r\n              >\r\n                <ViewsDirective>\r\n                  <ViewDirective\r\n                    option=\"Day\"\r\n                    startHour=\"09:30\"\r\n                    endHour=\"18:00\"\r\n                  />\r\n                  <ViewDirective option=\"Week\" />\r\n                  <ViewDirective option=\"Agenda\" />\r\n                </ViewsDirective>\r\n                <ResourcesDirective>\r\n                  <ResourceDirective\r\n                    field=\"slotId\"\r\n                    title=\"Slot\"\r\n                    name=\"Slot\"\r\n                    allowMultiple={false}\r\n                    textField=\"text\"\r\n                    dataSource={self.state.timeData}\r\n                    idField=\"id\"\r\n                    colorField=\"Color\"\r\n                  ></ResourceDirective>\r\n                </ResourcesDirective>\r\n                <Inject services={[Week, Agenda]} />\r\n              </ScheduleComponent>\r\n            ) : (\r\n              <div className=\"container main\">\r\n                Kindly complete profile first\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.User.userData,\r\n    parent: state.User.parentData,\r\n    otherUser: state.User.otherUserInfoData,\r\n    student: state.Student\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(TimeSlots);\r\n"]},"metadata":{},"sourceType":"module"}