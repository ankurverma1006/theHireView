{"ast":null,"code":"// handle user media capture\nexport function captureUserMedia(callback){var params={audio:false,video:true};navigator.getUserMedia(params,callback,function(error){alert(JSON.stringify(error));});};// handle S3 upload\nfunction getSignedUrl(file){var queryString='?objectName='+file.id+'&contentType='+encodeURIComponent(file.type);return fetch('/s3/sign'+queryString).then(function(response){return response.json();}).catch(function(err){console.log('error: ',err);});}function createCORSRequest(method,url){var xhr=new XMLHttpRequest();if(xhr.withCredentials!=null){xhr.open(method,url,true);}else if(typeof XDomainRequest!==\"undefined\"){//  xhr = new XDomainRequest();\nxhr.open(method,url);}else{xhr=null;}return xhr;};export function S3Upload(fileInfo){//parameters: { type, data, id }\nreturn new Promise(function(resolve,reject){getSignedUrl(fileInfo).then(function(s3Info){// upload to S3\nvar xhr=createCORSRequest('PUT',s3Info.signedUrl);xhr.onload=function(){if(xhr.status===200){console.log(xhr.status);resolve(true);}else{console.log(xhr.status);reject(xhr.status);}};xhr.setRequestHeader('Content-Type',fileInfo.type);xhr.setRequestHeader('x-amz-acl','public-read');return xhr.send(fileInfo.data);});});}","map":{"version":3,"sources":["C:\\Users\\Ankur\\Desktop\\therapidhire\\therapidhireui\\TheRapidHireUI\\src\\video\\AppUtils.js"],"names":["captureUserMedia","callback","params","audio","video","navigator","getUserMedia","error","alert","JSON","stringify","getSignedUrl","file","queryString","id","encodeURIComponent","type","fetch","then","response","json","catch","err","console","log","createCORSRequest","method","url","xhr","XMLHttpRequest","withCredentials","open","XDomainRequest","S3Upload","fileInfo","Promise","resolve","reject","s3Info","signedUrl","onload","status","setRequestHeader","send","data"],"mappings":"AAAA;AACA,MAAO,SAASA,CAAAA,gBAAT,CAA0BC,QAA1B,CAAoC,CACzC,GAAIC,CAAAA,MAAM,CAAG,CAAEC,KAAK,CAAE,KAAT,CAAgBC,KAAK,CAAE,IAAvB,CAAb,CAEAC,SAAS,CAACC,YAAV,CAAuBJ,MAAvB,CAA+BD,QAA/B,CAAyC,SAACM,KAAD,CAAW,CAClDC,KAAK,CAACC,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAD,CAAL,CACD,CAFD,EAGD,EAED;AACA,QAASI,CAAAA,YAAT,CAAsBC,IAAtB,CAA4B,CAC1B,GAAIC,CAAAA,WAAW,CAAG,eAAiBD,IAAI,CAACE,EAAtB,CAA2B,eAA3B,CAA6CC,kBAAkB,CAACH,IAAI,CAACI,IAAN,CAAjF,CACA,MAAOC,CAAAA,KAAK,CAAC,WAAaJ,WAAd,CAAL,CACNK,IADM,CACD,SAACC,QAAD,CAAc,CAClB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAHM,EAINC,KAJM,CAIA,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBF,GAAvB,EACD,CANM,CAAP,CAOD,CAED,QAASG,CAAAA,iBAAT,CAA2BC,MAA3B,CAAmCC,GAAnC,CAAwC,CACtC,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,cAAJ,EAAV,CAEA,GAAID,GAAG,CAACE,eAAJ,EAAuB,IAA3B,CAAiC,CAC/BF,GAAG,CAACG,IAAJ,CAASL,MAAT,CAAiBC,GAAjB,CAAsB,IAAtB,EACD,CAFD,IAEO,IAAI,MAAOK,CAAAA,cAAP,GAA0B,WAA9B,CAA2C,CAClD;AACEJ,GAAG,CAACG,IAAJ,CAASL,MAAT,CAAiBC,GAAjB,EACD,CAHM,IAGA,CACLC,GAAG,CAAG,IAAN,CACD,CAED,MAAOA,CAAAA,GAAP,CACD,EAED,MAAO,SAASK,CAAAA,QAAT,CAAkBC,QAAlB,CAA4B,CAAE;AACnC,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACtC1B,YAAY,CAACuB,QAAD,CAAZ,CACChB,IADD,CACM,SAACoB,MAAD,CAAY,CAChB;AACA,GAAIV,CAAAA,GAAG,CAAGH,iBAAiB,CAAC,KAAD,CAAQa,MAAM,CAACC,SAAf,CAA3B,CAEAX,GAAG,CAACY,MAAJ,CAAa,UAAW,CACtB,GAAIZ,GAAG,CAACa,MAAJ,GAAe,GAAnB,CAAwB,CACtBlB,OAAO,CAACC,GAAR,CAAYI,GAAG,CAACa,MAAhB,EACAL,OAAO,CAAC,IAAD,CAAP,CACD,CAHD,IAGO,CACLb,OAAO,CAACC,GAAR,CAAYI,GAAG,CAACa,MAAhB,EAEAJ,MAAM,CAACT,GAAG,CAACa,MAAL,CAAN,CACD,CACF,CATD,CAWAb,GAAG,CAACc,gBAAJ,CAAqB,cAArB,CAAqCR,QAAQ,CAAClB,IAA9C,EACAY,GAAG,CAACc,gBAAJ,CAAqB,WAArB,CAAkC,aAAlC,EAEA,MAAOd,CAAAA,GAAG,CAACe,IAAJ,CAAST,QAAQ,CAACU,IAAlB,CAAP,CACD,CApBD,EAqBD,CAtBM,CAAP,CAuBD","sourcesContent":["// handle user media capture\r\nexport function captureUserMedia(callback) {\r\n  var params = { audio: false, video: true };\r\n\r\n  navigator.getUserMedia(params, callback, (error) => {\r\n    alert(JSON.stringify(error));\r\n  });\r\n};\r\n\r\n// handle S3 upload\r\nfunction getSignedUrl(file) {\r\n  let queryString = '?objectName=' + file.id + '&contentType=' + encodeURIComponent(file.type);\r\n  return fetch('/s3/sign' + queryString)\r\n  .then((response) => {\r\n    return response.json();\r\n  })\r\n  .catch((err) => {\r\n    console.log('error: ', err)\r\n  })\r\n}\r\n\r\nfunction createCORSRequest(method, url) {\r\n  var xhr = new XMLHttpRequest();\r\n\r\n  if (xhr.withCredentials != null) {\r\n    xhr.open(method, url, true);\r\n  } else if (typeof XDomainRequest !== \"undefined\") {\r\n  //  xhr = new XDomainRequest();\r\n    xhr.open(method, url);\r\n  } else {\r\n    xhr = null;\r\n  }\r\n\r\n  return xhr;\r\n};\r\n\r\nexport function S3Upload(fileInfo) { //parameters: { type, data, id }\r\n  return new Promise((resolve, reject) => {\r\n    getSignedUrl(fileInfo)\r\n    .then((s3Info) => {\r\n      // upload to S3\r\n      var xhr = createCORSRequest('PUT', s3Info.signedUrl);\r\n\r\n      xhr.onload = function() {\r\n        if (xhr.status === 200) {\r\n          console.log(xhr.status)\r\n          resolve(true);\r\n        } else {\r\n          console.log(xhr.status)\r\n          \r\n          reject(xhr.status);\r\n        }\r\n      };\r\n\r\n      xhr.setRequestHeader('Content-Type', fileInfo.type);\r\n      xhr.setRequestHeader('x-amz-acl', 'public-read');\r\n\r\n      return xhr.send(fileInfo.data);\r\n    })\r\n  })\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}