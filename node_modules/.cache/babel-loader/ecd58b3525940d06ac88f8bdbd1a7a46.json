{"ast":null,"code":"import _classCallCheck from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Header from'../header/header';import{Button,Media,Row,Col,FormControl,FormGroup,InputGroup}from'react-bootstrap';import{connect}from'react-redux';import{bindActionCreators}from'redux';import{ToastContainer}from'react-toastify';import Slider from'react-slick';import _ from'lodash';import{Week,Month,Agenda,ScheduleComponent,ViewsDirective,ViewDirective,ResourcesDirective,ResourceDirective,Inject}from'@syncfusion/ej2-react-schedule';import{DataManager,Query,Predicate,Internationalization}from'@syncfusion/ej2-data';import moment from'moment';import{extend}from'@syncfusion/ej2-base';import\"@syncfusion/ej2-base/styles/material.css\";import\"@syncfusion/ej2-buttons/styles/material.css\";import\"@syncfusion/ej2-calendars/styles/material.css\";import\"@syncfusion/ej2-dropdowns/styles/material.css\";import\"@syncfusion/ej2-inputs/styles/material.css\";import\"@syncfusion/ej2-lists/styles/material.css\";import\"@syncfusion/ej2-navigations/styles/material.css\";import\"@syncfusion/ej2-popups/styles/material.css\";//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\nimport\"@syncfusion/ej2-react-schedule/styles/material.css\";//import '../node_modules/@syncfusion/ej2/material.css';\nimport ImageCropper from'../../common/cropper/imageCropper';import DownloadLink from\"react-download-link\";//import Img from '../../common/cropper/img';\nimport{DatePickerComponent}from'@syncfusion/ej2-react-calendars';import{TimePickerComponent}from'@syncfusion/ej2-react-calendars';//import moment from 'moment';\nimport{showErrorToast,uploadToAzure,limitCharacter,SampleNextArrow,SamplePrevArrow,getThumbImage,ZoomInAndOut}from'../../common/commonFunctions';import theRapidHireApiService from'../../common/core/api/apiService';import CONSTANTS from'../../common/core/config/appConfig';//import AvailableTimes from 'react-available-times';\n// import {\n//   actionGetStudentPersonalInfo,\n//   actionGetAllCompetency,\n//   actionGetAchievementsByUser,\n//   actionGetRecommendationsByUser,\n//   actionUpdateUserInfo,\n//   actionGetAchievementsData\n// } from '../../common/core/redux/actions';\nimport achievementDefaultImage from'../../assets/img/default_achievement.jpg';import SpiderChart from'../../common/spiderChart/spiderChart';var TimeSlots=/*#__PURE__*/function(_Component){_inherits(TimeSlots,_Component);function TimeSlots(props,context){var _this;_classCallCheck(this,TimeSlots);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeSlots).call(this,props));_this.state={isOpen:false,timeSlotData:[]};return _this;}_createClass(TimeSlots,[{key:\"componentWillMount\",value:function componentWillMount(){var userId=this.props.user.userId;this.setState({userId:userId});this.bookedTimeSlot(userId);this.getUserProfileData(userId);}},{key:\"componentDidMount\",value:function componentDidMount(){this.setTimeSlotForWeek();}},{key:\"getUserProfileData\",value:function getUserProfileData(userId){var _this2=this;theRapidHireApiService('getUserSkillsById',{userId:userId}).then(function(response){if(response.data.status==='Success'){console.log(response.data);var userProfile=response.data.result[0];_this2.setState({userProfile:userProfile});_this2.setUserProfileData(userProfile);}}).catch(function(err){console.log(err);});}},{key:\"setTimeSlotForWeek\",value:function setTimeSlotForWeek(){var timeSlotForWeek=[];for(var i=0;i<7;i++){var date=new Date();date.setDate(date.getDate()+i);var finalDate=date.getDate()+'/'+(date.getMonth()+1)+'/'+date.getFullYear();timeSlotForWeek.push({showDate:finalDate,date:new Date(moment().add('days',i).format(\"DD-MMM-YYYY\")).valueOf()});}this.setState({timeSlotForWeek:timeSlotForWeek});}},{key:\"bookedTimeSlot\",value:function bookedTimeSlot(userId,date){var _this3=this;var data={userId:userId,slotRegisteredDate:date};theRapidHireApiService('bookedTimeSlot',data).then(function(response){console.log(response);if(response.data.status==='Success'){var timeSlotData=_this3.state.timeSlotData;timeSlotData=response.data.result;_this3.setState({timeSlotData:timeSlotData});}}).catch(function(err){console.log(err);});}},{key:\"updateTimeSlot\",value:function updateTimeSlot(data){var _this4=this;var date=this.state.selectedDate;data.userId=this.props.user.userId;theRapidHireApiService('modifySlot',data).then(function(response){console.log(response);if(response.data.status==='Success'){_this4.bookedTimeSlot(_this4.state.userId,date);}}).catch(function(err){console.log(err);});}},{key:\"dateChange\",value:function dateChange(date){// console.log(new Date(moment(event.value).format(\"DD-MMM-YYYY\")).valueOf() );\n//   let date= parseInt(new Date(moment(event.value).format(\"DD-MMM-YYYY\")).valueOf());\n//  this.setState({newData:});\nthis.bookedTimeSlot(this.state.userId,date);this.setState({selectedDate:date});}},{key:\"render\",value:function render(){var dateValue=new Date();var _this=this;return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(ToastContainer,{autoClose:5000,className:\"custom-toaster-main-cls\",toastClassName:\"custom-toaster-bg\",transition:ZoomInAndOut}),React.createElement(Header,this.props),React.createElement(\"div\",{className:\"main-panel\"},React.createElement(\"div\",{className:\"\"},this.state.userProfile?React.createElement(\"div\",{className:\"w3-row-padding\"},React.createElement(\"div\",{className:\"w3-third\",style:{width:\"fit-content\",\"margin-left\":\"122px\",\"padding-top\":\"15px\"}},React.createElement(\"div\",{className:\"w3-white w3-text-grey w3-card-4\"},React.createElement(\"div\",{className:\"w3-display-container \",style:{overflow:\"hidden\"}},React.createElement(\"div\",{className:\"w3-container\"},this.state.timeSlotForWeek&&this.state.timeSlotForWeek.map(function(data){return React.createElement(\"p\",null,React.createElement(Button,{bsStyle:\"primary no-bold no-round mr-1\",onClick:_this.dateChange.bind(_this,data.date)},React.createElement(\"span\",{className:\"icon-share2\"}),data.showDate));})))),\" \"),React.createElement(\"div\",{className:\"w3-twothird\",style:{\"padding-top\":\"15px\"}},React.createElement(\"div\",{className:\"w3-container w3-card w3-white w3-margin-bottom\"},React.createElement(\"div\",{className:\"time_slot_card\"},React.createElement(\"div\",{className:\"header\"},React.createElement(\"h4\",{className:\"title\"},\"Avalilable TimeSlot\"),React.createElement(\"p\",{className:\"category\"},\"Kindly select date then get the date\")),React.createElement(\"div\",{className:\"content table-responsive table-full-width\"},React.createElement(\"table\",{className:\"table table-hover table-striped\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"startTime\"),React.createElement(\"th\",null,\"EndTime\"),React.createElement(\"th\",{className:\"text-right\"},\"Actions\"))),React.createElement(\"tbody\",null,this.state.timeSlotData.map(function(data){return React.createElement(\"tr\",{key:data.slotId},React.createElement(\"td\",null,moment(parseInt(data.startTimeStamp,10)).format(\"hh:mm:ss\")),React.createElement(\"td\",null,moment(parseInt(data.endTimeStamp,10)).format(\"hh:mm:ss\")),React.createElement(\"td\",null,React.createElement(Button,{bsStyle:\"default\",className:\"no-bold no-round\",onClick:_this.updateTimeSlot.bind(_this,data)},\"Book\")));})))))))):React.createElement(\"div\",{className:\"w3-content main-panel1\"},React.createElement(\"div\",{className:\"container main\"},\"Kindly complete profile first\")))));}}]);return TimeSlots;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.User.userData,parent:state.User.parentData,student:state.Student};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({},dispatch);};export default connect(mapStateToProps,mapDispatchToProps)(TimeSlots);","map":{"version":3,"sources":["/home/ank/Desktop/therapidhiregit/therapidhireui/TheRapidHireUI/src/user/profile/timeSlots.js"],"names":["React","Component","Header","Button","Media","Row","Col","FormControl","FormGroup","InputGroup","connect","bindActionCreators","ToastContainer","Slider","_","Week","Month","Agenda","ScheduleComponent","ViewsDirective","ViewDirective","ResourcesDirective","ResourceDirective","Inject","DataManager","Query","Predicate","Internationalization","moment","extend","ImageCropper","DownloadLink","DatePickerComponent","TimePickerComponent","showErrorToast","uploadToAzure","limitCharacter","SampleNextArrow","SamplePrevArrow","getThumbImage","ZoomInAndOut","theRapidHireApiService","CONSTANTS","achievementDefaultImage","SpiderChart","TimeSlots","props","context","state","isOpen","timeSlotData","userId","user","setState","bookedTimeSlot","getUserProfileData","setTimeSlotForWeek","then","response","data","status","console","log","userProfile","result","setUserProfileData","catch","err","timeSlotForWeek","i","date","Date","setDate","getDate","finalDate","getMonth","getFullYear","push","showDate","add","format","valueOf","slotRegisteredDate","selectedDate","dateValue","_this","width","overflow","map","dateChange","bind","slotId","parseInt","startTimeStamp","endTimeStamp","updateTimeSlot","mapStateToProps","User","userData","parent","parentData","student","Student","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Header from '../header/header';\nimport {\n  Button,\n  Media,\n  Row,\n  Col,\n  FormControl,FormGroup,\n  InputGroup\n} from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { ToastContainer } from 'react-toastify';\nimport Slider from 'react-slick';\nimport _ from 'lodash';\n\nimport { Week, Month, Agenda, ScheduleComponent, ViewsDirective, ViewDirective, ResourcesDirective, ResourceDirective, Inject } from '@syncfusion/ej2-react-schedule';\nimport { DataManager, Query, Predicate, Internationalization } from '@syncfusion/ej2-data';\nimport moment from 'moment';\n\nimport { extend } from '@syncfusion/ej2-base';\nimport \"@syncfusion/ej2-base/styles/material.css\";\nimport \"@syncfusion/ej2-buttons/styles/material.css\";\nimport \"@syncfusion/ej2-calendars/styles/material.css\";\nimport \"@syncfusion/ej2-dropdowns/styles/material.css\";\nimport \"@syncfusion/ej2-inputs/styles/material.css\";\nimport \"@syncfusion/ej2-lists/styles/material.css\";\nimport \"@syncfusion/ej2-navigations/styles/material.css\";\nimport \"@syncfusion/ej2-popups/styles/material.css\";\n//import \"@syncfusion/ej2-split-buttons/styles/material.css\";\nimport \"@syncfusion/ej2-react-schedule/styles/material.css\";\n//import '../node_modules/@syncfusion/ej2/material.css';\nimport ImageCropper from '../../common/cropper/imageCropper';\nimport DownloadLink from \"react-download-link\";\n//import Img from '../../common/cropper/img';\nimport { DatePickerComponent } from '@syncfusion/ej2-react-calendars';\nimport { TimePickerComponent } from '@syncfusion/ej2-react-calendars';\n//import moment from 'moment';\nimport {\n  showErrorToast,\n  uploadToAzure,\n  limitCharacter,\n  SampleNextArrow,\n  SamplePrevArrow,\n  getThumbImage,ZoomInAndOut\n} from '../../common/commonFunctions';\nimport theRapidHireApiService from '../../common/core/api/apiService';\nimport CONSTANTS from '../../common/core/config/appConfig';\n//import AvailableTimes from 'react-available-times';\n// import {\n//   actionGetStudentPersonalInfo,\n//   actionGetAllCompetency,\n//   actionGetAchievementsByUser,\n//   actionGetRecommendationsByUser,\n//   actionUpdateUserInfo,\n//   actionGetAchievementsData\n// } from '../../common/core/redux/actions';\nimport achievementDefaultImage from '../../assets/img/default_achievement.jpg';\nimport SpiderChart from '../../common/spiderChart/spiderChart';\n\nclass TimeSlots extends Component {\n  constructor(props, context) {\n    super(props);\n    this.state = {      \n      isOpen: false,\n      timeSlotData:[]\n    };   \n    \n  }\n\n  componentWillMount() {\n    let userId = this.props.user.userId;\n    this.setState({userId:userId});\n   this.bookedTimeSlot(userId);   \n   this.getUserProfileData(userId);\n  }\n\n  componentDidMount() {  \n    this.setTimeSlotForWeek();\n  }\n\n  getUserProfileData(userId){\n    theRapidHireApiService('getUserSkillsById',{userId})\n    .then(response => {     \n      if (response.data.status === 'Success') {\n        console.log(response.data);       \n         let userProfile = response.data.result[0];     \n        this.setState({userProfile:userProfile                  \n         }); \n         this.setUserProfileData(userProfile);\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  } \n\n  setTimeSlotForWeek(){  \n    let timeSlotForWeek=[];\n    for(var i=0;i<7;i++){\n      let date = new Date();\n      date.setDate(date.getDate() + i);    \n     \n      let finalDate = date.getDate()+'/'+ (date.getMonth()+1) +'/'+date.getFullYear();\n      \n      timeSlotForWeek.push({showDate:finalDate,date : new Date(moment().add('days', i).format(\"DD-MMM-YYYY\")).valueOf() })\n    }\n    this.setState({timeSlotForWeek});\n  }\n \n  bookedTimeSlot(userId,date){\n    let data={\n      userId:userId,\n      slotRegisteredDate:date\n    }\n    theRapidHireApiService('bookedTimeSlot',data)\n    .then(response => {    \n      console.log(response); \n      if (response.data.status === 'Success' ) {\n         let timeSlotData= this.state.timeSlotData;\n         timeSlotData= response.data.result;     \n         this.setState({timeSlotData: timeSlotData});\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  updateTimeSlot(data){\n   let date=  this.state.selectedDate;\n   data.userId = this.props.user.userId;    \n    theRapidHireApiService('modifySlot',data)\n    .then(response => {    \n      console.log(response); \n      if (response.data.status === 'Success') {\n        this.bookedTimeSlot(this.state.userId,date)\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n\n  }\n\n  dateChange(date){\n   // console.log(new Date(moment(event.value).format(\"DD-MMM-YYYY\")).valueOf() );\n //   let date= parseInt(new Date(moment(event.value).format(\"DD-MMM-YYYY\")).valueOf());\n  //  this.setState({newData:});\n   this.bookedTimeSlot(this.state.userId,date);\n   this.setState({selectedDate:date })\n  }\n\n \n  render() {\n    let dateValue=new Date();\n    let _this= this;\n    return (\n      <div className=\"wrapper\">\n       <ToastContainer\n          autoClose={5000}\n          className=\"custom-toaster-main-cls\"\n          toastClassName=\"custom-toaster-bg\"\n          transition={ZoomInAndOut}\n        /> \n      <Header {...this.props} />     \n      <div className=\"main-panel\">   \n      <div className=\"\">\n      \n      {this.state.userProfile ?   \n      <div className=\"w3-row-padding\">\n      <div className=\"w3-third\" style={{width: \"fit-content\",\"margin-left\": \"122px\",\"padding-top\": \"15px\"}}>\n     <div className=\"w3-white w3-text-grey w3-card-4\">\n      <div className=\"w3-display-container \" style={{overflow:\"hidden\"}}> \n      <div className=\"w3-container\">\n        {this.state.timeSlotForWeek && this.state.timeSlotForWeek.map((data) => (    \n                     <p>    \n                         <Button\n                                      bsStyle=\"primary no-bold no-round mr-1\"\n                                        onClick={_this.dateChange.bind(\n                                          _this,\n                                          data.date                      \n                                        )}\n                                       >\n                                       <span className=\"icon-share2\" />\n                                       {data.showDate}\n                            </Button></p>\n        ))}                               \n        </div>\n        </div>\n        </div> </div>\n        <div className=\"w3-twothird\" style={{\"padding-top\": \"15px\"}}>\n          <div className=\"w3-container w3-card w3-white w3-margin-bottom\">    \n            \n               {/* <DatePickerComponent id=\"datepicker\" onChange={this.dateChange.bind(this)} format='yyyy-MM-dd' placeholder='Enter date' />  */}\n\n       \n       <div className=\"time_slot_card\">\n        <div className=\"header\">\n          <h4 className=\"title\">Avalilable TimeSlot</h4>\n          <p className=\"category\">Kindly select date then get the date</p>\n        </div>\n        <div className=\"content table-responsive table-full-width\">\n          <table className=\"table table-hover table-striped\">\n            <thead>\n              <tr>              \n                <th>startTime</th>\n                <th>EndTime</th>            \n                <th className=\"text-right\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.timeSlotData.map(data => (\n                <tr key={data.slotId}>\n                  <td>{moment(parseInt(data.startTimeStamp,10)).format(\"hh:mm:ss\")}</td>\n                  <td>{moment(parseInt(data.endTimeStamp,10)).format(\"hh:mm:ss\")}</td>                                 \n                  <td><Button\n                          bsStyle=\"default\"\n                          className=\"no-bold no-round\"\n                          onClick={_this.updateTimeSlot.bind(_this, data)}              \n                        >\n                        Book\n                       </Button></td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n        </div>\n      </div>\n       \n       </div>\n       </div>\n       </div>:<div className=\"w3-content main-panel1\">\n                <div className=\"container main\">\n                  Kindly complete profile first\n                  </div>\n              </div>\n\n            }\n       </div>\n      </div>\n       \n       \n       \n       \n \n      </div>\n    );\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    user: state.User.userData,\n    parent: state.User.parentData,\n    student: state.Student\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n     \n    },\n    dispatch\n  );\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TimeSlots);\n"]},"metadata":{},"sourceType":"module"}