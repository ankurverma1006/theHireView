{"ast":null,"code":"import axios from'axios';import ApiJson from'./apiConfigJson';import{showErrorToast,showSuccessToast,getAPIURL,getLocalStorage}from'../../commonFunctions';import{get}from'http';var apiFailCounter=0;axios.defaults.baseURL=// \"https://therapidhire.herokuapp.com/\";\ngetAPIURL().httpServer+getAPIURL().APIURL+':'+getAPIURL().APIPort;axios.interceptors.request.use(function(config){var userInfo=getLocalStorage('userInfo');if(userInfo){if(userInfo.token){var access_token=userInfo.token;config.headers.Authorization=\"Spike \".concat(access_token);}}return config;},function(error){return Promise.reject(error);});var prepareDataObject=function prepareDataObject(_data_,paramObj){for(var key in _data_){if(paramObj[key]||paramObj[key]===false){_data_[key]=paramObj[key];}else{if(typeof _data_[key]!=='object')_data_[key]='';}}return _data_;};var injectParamsToUrl=function injectParamsToUrl(_url_,paramObj){var url=_url_;for(var key in paramObj){url=url.replace(':'+key,paramObj[key]);}return url;};var handleErrorByStatus=function handleErrorByStatus(error){if(error&&error.status==='Error'){var message=error.message;showErrorToast(message);}};var theRapidHireApiService=function theRapidHireApiService(apiKeyName,data){var apiDetails=ApiJson[apiKeyName];if(!apiDetails){console.log('Api configuration do not found in api-json, please check api-json.js');throw new Error('Api configuration do not found in api-json, please check api-json.js');}var requestObject=Object.assign({},apiDetails);requestObject.data=prepareDataObject(requestObject.data,data);requestObject.url=injectParamsToUrl(requestObject.url,data);return axios(requestObject).then(function(result){apiFailCounter=0;if(result.data&&result.data.status==='Success'){if(result.data.message){var message=result.data.message;if(requestObject.showResultMessage===true)showSuccessToast(message);}}else{handleErrorByStatus(result.data);}return result;}).catch(function(error){console.log('error',error);if(error&&error.response){if(requestObject.showErrorMessage===true)handleErrorByStatus(error.response);}if(error.config.maxContentLength-1&&error.toString().indexOf('Network Error')>-1){apiFailCounter++;if(apiFailCounter>=3){localStorage.clear();window.open(window.location.origin,'_self');}}return error.response;});};export default theRapidHireApiService;","map":{"version":3,"sources":["C:\\Users\\Ankur\\Desktop\\therapidhire\\therapidhireui\\TheRapidHireUI\\src\\common\\core\\api\\apiService.js"],"names":["axios","ApiJson","showErrorToast","showSuccessToast","getAPIURL","getLocalStorage","get","apiFailCounter","defaults","baseURL","httpServer","APIURL","APIPort","interceptors","request","use","config","userInfo","token","access_token","headers","Authorization","error","Promise","reject","prepareDataObject","_data_","paramObj","key","injectParamsToUrl","_url_","url","replace","handleErrorByStatus","status","message","theRapidHireApiService","apiKeyName","data","apiDetails","console","log","Error","requestObject","Object","assign","then","result","showResultMessage","catch","response","showErrorMessage","maxContentLength","toString","indexOf","localStorage","clear","window","open","location","origin"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nimport ApiJson from './apiConfigJson';\r\nimport {\r\n  showErrorToast,\r\n  showSuccessToast,\r\n  getAPIURL,\r\n  getLocalStorage\r\n} from '../../commonFunctions';\r\nimport { get } from 'http';\r\n\r\nlet apiFailCounter = 0;\r\n\r\naxios.defaults.baseURL = // \"https://therapidhire.herokuapp.com/\";\r\n  getAPIURL().httpServer + getAPIURL().APIURL + ':' + getAPIURL().APIPort;\r\n\r\naxios.interceptors.request.use(\r\n  function(config) {\r\n    let userInfo = getLocalStorage('userInfo');\r\n    if (userInfo) {\r\n      if (userInfo.token) {\r\n        let access_token = userInfo.token;\r\n        config.headers.Authorization = `Spike ${access_token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  function(error) {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst prepareDataObject = (_data_, paramObj) => {\r\n  for (let key in _data_) {\r\n    if (paramObj[key] || paramObj[key] === false) {\r\n      _data_[key] = paramObj[key];\r\n    } else {\r\n      if (typeof _data_[key] !== 'object') _data_[key] = '';\r\n    }\r\n  }\r\n  return _data_;\r\n};\r\n\r\nconst injectParamsToUrl = (_url_, paramObj) => {\r\n  var url = _url_;\r\n  for (let key in paramObj) {\r\n    url = url.replace(':' + key, paramObj[key]);\r\n  }\r\n  return url;\r\n};\r\n\r\nconst handleErrorByStatus = error => {\r\n  if (error && error.status === 'Error') {\r\n    const message = error.message;\r\n    showErrorToast(message);\r\n  }\r\n};\r\n\r\nconst theRapidHireApiService = (apiKeyName, data) => {\r\n  let apiDetails = ApiJson[apiKeyName];\r\n  if (!apiDetails) {\r\n    console.log(\r\n      'Api configuration do not found in api-json, please check api-json.js'\r\n    );\r\n    throw new Error(\r\n      'Api configuration do not found in api-json, please check api-json.js'\r\n    );\r\n  }\r\n\r\n  let requestObject = Object.assign({}, apiDetails);\r\n  requestObject.data = prepareDataObject(requestObject.data, data);\r\n  requestObject.url = injectParamsToUrl(requestObject.url, data);\r\n\r\n  return axios(requestObject)\r\n    .then(function(result) {\r\n      apiFailCounter = 0;\r\n      if (result.data && result.data.status === 'Success') {\r\n        if (result.data.message) {\r\n          const message = result.data.message;\r\n          if (requestObject.showResultMessage === true)\r\n            showSuccessToast(message);\r\n        }\r\n      } else {\r\n        handleErrorByStatus(result.data);\r\n      }\r\n      return result;\r\n    })\r\n    .catch(function(error) {\r\n      console.log('error', error);\r\n      if (error && error.response) {\r\n        if (requestObject.showErrorMessage === true)\r\n          handleErrorByStatus(error.response);\r\n      }\r\n\r\n      if (\r\n        error.config.maxContentLength - 1 &&\r\n        error.toString().indexOf('Network Error') > -1\r\n      ) {\r\n        apiFailCounter++;\r\n        if (apiFailCounter >= 3) {\r\n          localStorage.clear();\r\n          window.open(window.location.origin, '_self');\r\n        }\r\n      }\r\n      return error.response;\r\n    });\r\n};\r\n\r\nexport default theRapidHireApiService;\r\n"]},"metadata":{},"sourceType":"module"}